(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f0b2f47"],{"0bb1":function(t,e,i){},1227:function(t,e,i){"use strict";i("2302")},"13d5":function(t,e,i){"use strict";var a=i("23e7"),n=i("d58f").left,s=i("a640"),o=i("1212"),l=i("9adc"),r=!l&&o>79&&o<83,c=r||!s("reduce");a({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return n(this,t,e,e>1?arguments[1]:void 0)}})},2302:function(t,e,i){},"270d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAWCAYAAADeiIy1AAAAAXNSR0IArs4c6QAAAy1JREFUSEullU9oXHUQx7+zuzF/2AoiHtKYYAnBgyeLQcmh2l4EKQipF8Em+c3vgeghB6s5haZLTlYLPTTQiG9elgYpoVUQxVO0bUpRQQ9GUCQR3LYqemtWXJPdN2U2u8Fs9m1COpcHv9/MfH7z9xFaSBiGnojeAnAIAAHQBnU7SwH4A8A8M08muTPFphKG4QkiutLqIU3u3mfmd5rZJIJEpASgXVVduVz+rKOjQ0ul0g79bDZbKZVKTxHRkgFUtd97/2sjbMswn8/3qWpvHMcZAK8DeBXAEjMf2UtUYRieIaIpVf0BwKlUKvUfgL+dcz+bfRUURdFZVW0MuZxOp58YHR29uxeQ6YjICoD+Bv1PmHmYROQ1AJdql7cAbABYTqVS58fGxlb3CjG9mZmZbFdX10Qcx0NE9BCAZwHY95yB6p30HDN/k+R4dna2O5PJDBPRoKq2E9FPcRx/HATBj0k2+Xz+0Uql8rvBDPSP1ZCZs0kGIjIB4N2E+w+Y2WraVESkAKCXjFoul9u990beIVEUsaqGtYuPAHxRS+8QgPFqoYkuOufeaGYvIrcBPJ7Y3mZk6Wpra6s+QFVf8d5f/b8zETkM4DqArKoe895/1QgTkTsAelqCRGQawCQRTTvnTidE/JKqfm5AZn4hESQiNwAccM4dJqJtK0ZErgF4Po7jgSAIrHWT6hADiJnZZnCbbEVU7zoi6nTO2TbYEhH5HsDTRNTtnPuzBahiO885l2ry2M3UtQJFUfShqnpVfdl7/2lCsR8D8BeAFWYe2FdEYRgeJaIvVfUX7/2TCSBrEJuvM8653L5AZiQiX9uEq+p3qvpmEATf2vnc3Fx/pVKZIqKTANZUtcd7v7Zv0Pz8/MPr6+uLAJ6pObGc28Ks7jQisn/Ri8655YSIt9eoWCx2jI+Pm4OkzrKBtB/bwZrCv0R0IZ1O50ZGRmy7JNltDmy9GZi55UzVvdRSlikUCqu5XK6cBKifi8hvAPoMdM/maLdZ2c1hs/uFhYV0sVi0unUa6G0A75miqi4S0ToRpffjuG6jqko2UKqDAB5R1cvVdIlItUUfxHkL25sbGxvH7wMyzILCUiLBSgAAAABJRU5ErkJggg=="},"2b18":function(t,e,i){t.exports=i.p+"img/ab.b70350f1.svg"},"3a4d":function(t,e,i){"use strict";i("626b")},4484:function(t,e,i){t.exports=i.p+"img/no_point.3a463b08.png"},5365:function(t,e,i){},"5b9e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"line"},[e("ScreenShot",{ref:"screenShot"}),t.loading?e("div",{staticClass:"shot-loading"},[e("a-spin",{attrs:{size:"large"}}),e("span",[t._v("正在生成缩略图，请稍等~~")])],1):t._e(),e("div",{class:["modal-left",t.shrinkLeft?"modal-shrink":""]},[t._m(0),t.shrinkLeft?e("img",{staticClass:"shrink",attrs:{src:i("b478")},on:{click:function(e){t.shrinkLeft=!t.shrinkLeft}}}):e("img",{staticClass:"shrink",attrs:{src:i("15b8")},on:{click:function(e){t.shrinkLeft=!t.shrinkLeft}}}),e("div",{staticClass:"task-mainer x-scroll"},[e("div",{staticClass:"task-name"},[e("a-input",{model:{value:t.missionName,callback:function(e){t.missionName=e},expression:"missionName"}},[e("img",{attrs:{slot:"suffix",src:i("1e1d"),alt:""},slot:"suffix"})])],1),e("div",{staticClass:"task-address"},[e("img",{attrs:{src:i("5f89"),alt:""}}),e("span",[t._v(t._s(t.address||"位置信息（请在地图上选点）"))])]),e("div",{staticClass:"task-icon-module"},[e("div",{staticClass:"module"},[t._m(1),e("div",{staticClass:"text"},[t._v(" "+t._s(t.pointsNum)+" ")]),e("div",{staticClass:"unit"},[t._v(" 航点数 ")])]),e("div",{staticClass:"module"},[t._m(2),e("div",{staticClass:"text"},[t._v(" "+t._s(t.distance)+" ")]),e("div",{staticClass:"unit"},[t._v(" 飞行里程(km) ")])]),e("div",{staticClass:"module"},[t._m(3),e("div",{staticClass:"text"},[t._v(" "+t._s(t.flyTime)+" ")]),e("div",{staticClass:"unit"},[t._v(" 飞行时间(min) ")])])]),e("div",{staticClass:"tab-c"},[e("div",{staticClass:"tab"},[e("a-tooltip",{attrs:{placement:"bottom"}},[e("template",{slot:"title"},[e("span",[t._v("统一设置所有航点信息，后续可选择单点调整。")])]),e("div",{staticClass:"tab-item",class:{active:"line"===t.settingType},on:{click:function(e){t.settingType="line"}}},[t._v(" 全局设置 ")])],2),e("div",{staticClass:"tab-item",class:{active:"point"===t.settingType},on:{click:function(e){t.settingType="point"}}},[t._v(" 航点设置 ")])],1)]),0===t.pointsList.length?[t._m(4)]:[e("div",{directives:[{name:"show",rawName:"v-show",value:"line"===t.settingType,expression:"settingType === 'line'"}],staticClass:"setting-c"},[e("div",{staticClass:"num-c"},[e("div",{staticClass:"task-line-module take-off"},[t._m(5),e("a-select",{staticStyle:{width:"54%"},attrs:{"dropdown-class-name":"black-theme"},model:{value:t.heightMode,callback:function(e){t.heightMode=e},expression:"heightMode"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),t._l(t.heightModes,(function(i,a){return e("a-select-option",{key:a,attrs:{value:i.value}},[t._v(" "+t._s(i.text)+" ")])}))],2)],1),t._e(),e("PlanSlider",{attrs:{value:t.cruiseSpeed,title:"飞行速度",unit:"m/s",icon:i("c091"),min:.5,max:15,step:.1},on:{change:function(e){return t.sliderChangeEvent(e,"cruiseSpeed")}}}),e("PlanSlider",{attrs:{value:t.cruiseAltitude,title:"飞行高度",unit:"m",icon:i("8e1c"),min:-200,max:500,step:1},on:{change:function(e){return t.sliderChangeEvent(e,"cruiseAltitude")}}}),e("PlanSlider",{attrs:{value:t.cruiseGimbalPitch,title:"云台俯仰角",unit:"°",icon:i("5dec"),min:-120,max:45,step:.1},on:{change:function(e){return t.sliderChangeEvent(e,"cruiseGimbalPitch")}}}),t._m(6),e("div",{staticClass:"task-line-module take-off"},[e("a-select",{staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"black-theme"},model:{value:t.globalWaypointTurnMode,callback:function(e){t.globalWaypointTurnMode=e},expression:"globalWaypointTurnMode"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),t._l(t.globalWaypointTurnModes,(function(i,a){return e("a-select-option",{key:a,attrs:{value:i.value}},[e("div",[e("p",[t._v(" "+t._s(i.text))]),e("img",{staticStyle:{width:"100%","border-bottom":"1px solid grey"},attrs:{src:t.getTurnModeImg(i.value)}})])])}))],2)],1),t._m(7),e("div",{staticClass:"task-line-module take-off"},[e("a-select",{staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"black-theme"},model:{value:t.globalHeadingMode,callback:function(e){t.globalHeadingMode=e},expression:"globalHeadingMode"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),t._l(t.globalHeadingModes,(function(i,a){return e("a-select-option",{key:a,attrs:{value:i.value}},[t._v(" "+t._s(i.text)+" ")])}))],2)],1),e("div",{staticClass:"task-line-module take-off"},[t._m(8),e("a-switch",{model:{value:t.isGPhoto,callback:function(e){t.isGPhoto=e},expression:"isGPhoto"}})],1)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:"point"===t.settingType&&t.pointsList&&t.pointsList.length>0,expression:"settingType === 'point' && pointsList && pointsList.length > 0"}],staticClass:"setting-c"},[e("a-carousel",{ref:"pointCarousel",attrs:{arrows:"",dots:!1,"before-change":t.beforeCarouselChange}},[e("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"0",zIndex:"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[e("a-icon",{attrs:{type:"caret-left"}})],1),e("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"0","text-align":"right"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[e("a-icon",{attrs:{type:"caret-right"}})],1),t._l(t.pointsList,(function(i,a){return e("div",{key:a,staticClass:"point-name"},[t._v(" 航点"+t._s(i.text)+" ")])}))],2),e("div",[e("div",{staticClass:"operate-panel"},[e("Panel",{on:{handlePanel:t.handlePanel}}),e("div",{staticClass:"lat-lng-module"},[e("div",{staticClass:"input-module task-name"},[e("div",{staticClass:"label"},[t._v(" 经度 ")]),e("a-input",{model:{value:t.lng,callback:function(e){t.lng=t._n(e)},expression:"lng"}})],1),e("div",{staticClass:"input-module task-name"},[e("div",{staticClass:"label"},[t._v(" 纬度 ")]),e("a-input",{model:{value:t.lat,callback:function(e){t.lat=t._n(e)},expression:"lat"}})],1)])],1),e("div",{staticClass:"num-c"},[e("div",{staticClass:"custom-name-module task-name"},[e("div",{staticClass:"module-title"},[t._m(9),e("a-input",{model:{value:t.customName,callback:function(e){t.customName=e},expression:"customName"}},[e("img",{attrs:{slot:"suffix",src:i("1e1d")},slot:"suffix"})])],1),e("PlanSlider",{attrs:{value:t.speed,title:"飞行速度",unit:"m/s",icon:i("c091"),min:.5,max:15,step:.1},on:{change:function(e){return t.sliderChangeEvent(e,"speed")}}}),e("PlanSlider",{attrs:{value:t.altitude,title:"飞行高度",unit:"m",icon:i("8e1c"),min:-200,max:500,step:1},on:{change:function(e){return t.sliderChangeEvent(e,"altitude")}}}),e("PlanSlider",{attrs:{value:t.gimbalPitch,title:"云台俯仰角",unit:"°",icon:i("5dec"),min:-120,max:45,step:.1},on:{change:function(e){return t.sliderChangeEvent(e,"gimbalPitch")}}}),e("div",{staticClass:"module-title"},[t._m(10),e("div",{staticClass:"task-line-module take-off"},[e("a-select",{staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"black-theme"},on:{change:t.handleHeadingMode},model:{value:t.headingMode,callback:function(e){t.headingMode=e},expression:"headingMode"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),t._l(t.globalHeadingModes,(function(i,a){return e("a-select-option",{key:a,attrs:{value:i.value}},[t._v(" "+t._s(i.text)+" ")])})),e("a-select-option",{attrs:{value:4}},[t._v(" 自定义 ")]),e("a-select-option",{attrs:{value:5}},[t._v(" 朝向兴趣点 ")])],2)],1)]),4===t.headingMode?e("PlanSlider",{attrs:{value:t.heading,title:"机身偏航角度",unit:"°",icon:i("805b"),min:-180,max:180,step:.1},on:{change:function(e){return t.sliderChangeEvent(e,"heading")}}}):t._e(),5===t.headingMode?e("div",{staticClass:"module-title"},[t._m(11),e("div",{staticClass:"task-line-module take-off"},[e("a-input",{attrs:{placeholder:"经度,纬度（英文逗号分隔）"},on:{blur:t.interstLocHandler},model:{value:t.interstLoc,callback:function(e){t.interstLoc=e},expression:"interstLoc"}})],1)]):t._e(),e("div",{staticClass:"module-title"},[t._m(12),e("div",{staticClass:"task-line-module take-off",staticStyle:{"margin-bottom":"0"}},[e("a-select",{staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"black-theme"},on:{change:t.handleWaypointTurnMode},model:{value:t.waypointTurnMode,callback:function(e){t.waypointTurnMode=e},expression:"waypointTurnMode"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),t._l(t.globalWaypointTurnModes,(function(i,a){return e("a-select-option",{key:a,attrs:{value:i.value}},[e("div",[e("p",[t._v(" "+t._s(i.text))]),e("img",{staticStyle:{width:"100%","border-bottom":"1px solid grey"},attrs:{src:t.getTurnModeImg(i.value)}})])])}))],2)],1)]),1==t.waypointTurnMode||4==t.waypointTurnMode?e("PlanSlider",{attrs:{value:t.waypointTurnValue,title:"航点转弯截距",unit:"m",icon:i("805b"),min:0,max:t.waypointTurnValueMax,step:.1},on:{change:function(e){return t.sliderChangeEvent(e,"waypointTurnValue")}}}):t._e()],1),e("Actions",{ref:"actions",on:{chosenList:t.chosenList}})],1)])],1)]],2),e("div",{directives:[{name:"permission",rawName:"v-permission",value:"route/route/waypoint",expression:"'route/route/waypoint'"}],staticClass:"x-icon-btn",on:{click:t.submitTask}},[e("img",{attrs:{src:i("e95e"),alt:""}}),e("span",[t._v(" 提交任务 ")])])]),e("div",{staticClass:"map-custom"},[e("Map",{attrs:{"site-i-d":t.siteID,center:t.siteLocation,"is-exist-two-self-layer":t.isExistTwoSelfLayer}})],1),e("KmlUpload",{directives:[{name:"permission",rawName:"v-permission",value:"route/route/waypoint",expression:"'route/route/waypoint'"}],on:{initKmlData:t.initKmlData}})],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"common-header"},[e("div",{staticClass:"dot"}),e("div",{staticClass:"title"},[t._v(" 路点巡航 ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:i("cc11")}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:i("c5844")}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:i("3261")}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"no-point"},[e("img",{attrs:{src:i("4484")}}),e("div",[t._v(" 请绘制航点 ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"label-module"},[e("img",{attrs:{src:i("8e1c")}}),e("span",{staticClass:"label"},[t._v("高度模式")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-line-module take-off"},[e("div",{staticClass:"label-module"},[e("img",{attrs:{src:i("c091")}}),e("span",{staticClass:"label"},[t._v("航点类型")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-line-module take-off"},[e("div",{staticClass:"label-module"},[e("img",{attrs:{src:i("c091")}}),e("span",{staticClass:"label"},[t._v("飞行器偏航角模式")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"label-module"},[e("img",{attrs:{src:i("270d")}}),e("span",{staticClass:"label"},[t._v("航点拍照")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"num-name"},[e("img",{staticClass:"num-icon",attrs:{src:i("dbc2")}}),t._v(" 名称 ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-line-module"},[e("div",{staticClass:"label-module"},[e("img",{attrs:{src:i("c091")}}),e("span",{staticClass:"label"},[t._v("飞行器偏航角模式")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-line-module"},[e("div",{staticClass:"label-module"},[e("span",{staticClass:"label"},[t._v("兴趣点经纬度")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-line-module"},[e("div",{staticClass:"label-module"},[e("img",{attrs:{src:i("c091")}}),e("span",{staticClass:"label"},[t._v("航点类型")])])])}],s=(i("14d9"),i("13d5"),i("2f62")),o=i("1157"),l=i.n(o),r=i("d30b"),c=i("595b"),u=i("70b0"),d=i.n(u),h=(i("e11e"),i("95dc")),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel"},[e("div",{staticClass:"direction-forward",on:{click:function(e){return t.handle("latUp")}}}),e("div",{staticClass:"direction-back",on:{click:function(e){return t.handle("latDown")}}}),e("div",{staticClass:"direction-left",on:{click:function(e){return t.handle("lngDown")}}}),e("div",{staticClass:"direction-right",on:{click:function(e){return t.handle("lngUp")}}})])},m=[],p={methods:{handle(t){this.$emit("handlePanel",t)}}},f=p,v=(i("1227"),i("2877")),b=Object(v["a"])(f,g,m,!1,null,"734cece7",null),x=b.exports,y=i("5fed"),_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"actions-self"},[e("div",{staticClass:"x-title"},[t._v(" 航点动作 "),e("div",{staticClass:"add-btn",on:{click:function(e){e.stopPropagation(),t.showList=!t.showList}}},[t._v(" 添加 "),e("a-icon",{staticClass:"add-icon",attrs:{type:"plus"}})],1),t.showList?e("div",{staticClass:"action-list"},t._l(t.actionList,(function(i,a){return e("div",{key:a,staticClass:"action-item",on:{click:function(e){return t.chose(i)}}},[t._v(" "+t._s(i.text)+" ")])})),0):t._e()]),t._l(t.chosenList,(function(a,n){return e("div",{key:n},[e("div",{staticClass:"sub-title"},[t._v(" 动作"+t._s(n+1)+" "),e("div",{staticClass:"del-icon",on:{click:function(e){return t.actionDel(n)}}},[e("img",{attrs:{src:i("75a8")}})])]),e("div",{staticClass:"action-detail"},[e("PlanSlider",{attrs:{value:Number(a["value_"+n]),title:a.text,unit:a.unit,min:Number(a.min),max:Number(a.max),step:Number(a.step)},on:{change:function(e){return t.sliderChangeEvent(e,n)}}})],1)])}))],2)},P=[],A={components:{PlanSlider:y["a"]},data(){return{showList:!1,chosenList:[],actionList:[{text:"拍照",key:5,value:-1},{text:"悬停等待",key:1,value:30,min:1,max:900,step:1,unit:"s"},{text:"开始录影",key:2,value:-1},{text:"停止录影",key:3,value:-1},{text:"飞行器偏航角",key:6,value:0,min:-180,max:180,step:.1,unit:"°"},{text:"云台俯仰角",key:4,value:-90,min:-90,max:0,step:.1,unit:"°"},{text:"变焦",key:7,value:5,min:1,max:200,step:.1,unit:"倍"},{text:"云台航偏角绝对调整",key:8,value:0,min:-180,max:180,step:.1,unit:"°"},{text:"云台航偏角相对调整",key:9,value:0,min:-180,max:180,step:.1,unit:"°"},{text:"开始等时间隔拍照",key:10,value:20,min:1,max:30,step:1,unit:"s"},{text:"开始等距间隔拍照",key:11,value:20,min:1,max:100,step:1,unit:"m"},{text:"停止间隔拍照",key:12,value:-1}]}},watch:{chosenList(t){this.$emit("chosenList",t)}},methods:{actionDel(t){this.chosenList.forEach((e,i)=>{i>=t&&(e["value_"+(i-1)]=e["value_"+i],delete e["value_"+i])}),this.chosenList.splice(t,1),this.$message.success("航点动作删除成功！")},sliderChangeEvent(t,e){this.$set(this.chosenList,e,{...this.chosenList[e],["value_"+e]:t})},closeActionsSelect(){this.showList=!1},chose(t){this.chosenList.push(t);const e=this.chosenList.length-1;this.chosenList[e]["value_"+e]=t.value,this.showList=!1},getData(t){if(this.chosenList=[],t&&t.actions&&t.actions.length>0){const e={};this.actionList.forEach(t=>{e[t.key]=t}),t.actions.forEach((i,a)=>{e[i.key]?(i.text=e[i.key].text,i.min=e[i.key].min,i.max=e[i.key].max,i.step=e[i.key].step,i.unit=e[i.key].unit):t.actions.splice(a,1)}),this.chosenList=t.actions}}}},T=A,C=(i("3a4d"),Object(v["a"])(T,_,P,!1,null,"110e0672",null)),k=C.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"kml-upload"},[e("div",{staticClass:"kml-btn"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.kmlModal=!0}}},[t._v(" 文件导入 ")])],1),e("a-modal",{staticClass:"black-modal kml-task-modal",attrs:{"mask-closable":!1,footer:null,centered:""},on:{cancel:function(e){t.kmlModal=!1}},model:{value:t.kmlModal,callback:function(e){t.kmlModal=e},expression:"kmlModal"}},[e("div",{staticClass:"title"},[e("div",{staticClass:"text"},[t._v(" 新建任务 ")])]),e("div",{staticClass:"filter-box"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v(" 文件类型 ")]),e("a-select",{staticClass:"item-content",attrs:{"dropdown-class-name":"black-theme"},model:{value:t.fileType,callback:function(e){t.fileType=e},expression:"fileType"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),e("a-select-option",{key:"kmz",attrs:{value:"kmz"}},[t._v(" KMZ ")]),e("a-select-option",{key:"kml",attrs:{value:"kml"}},[t._v(" KML ")]),e("a-select-option",{key:"json",attrs:{value:"json"}},[t._v(" JSON ")])],2)],1),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v(" 导入任务 ")]),e("UploadFile",{attrs:{"file-type":t.fileType},on:{upload:t.upload}})],1)]),e("div",{staticClass:"btn-box"},[e("div",{staticClass:"x-btn",on:{click:t.createKml}},[e("img",{attrs:{src:"/home/btn-confirm.png",alt:""}}),e("span",[t._v(" 确定 ")])]),e("div",{staticClass:"x-btn ghost",on:{click:function(e){t.kmlModal=!1}}},[e("img",{attrs:{src:"/home/btn-cancel.png",alt:""}}),e("span",[t._v(" 取消 ")])])])])],1)},S=[],F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mission-upload item-content"},[e("a-upload",{attrs:{name:"file",accept:".kml,.json,.kmz","custom-request":t.customRequest},on:{change:t.handleChange}},[e("a-button",{staticStyle:{width:"138px"},attrs:{disabled:"done"===t.fileStatus}},[e("a-icon",{attrs:{type:"upload"}}),t._v(" 导入任务 ")],1)],1),t.routes.length>1?e("div",{staticClass:"item",staticStyle:{"margin-left":"-20%"}},[e("div",{staticClass:"label"},[t._v(" 选择第 ")]),e("a-select",{staticClass:"item-content",staticStyle:{width:"30%"},attrs:{"dropdown-class-name":"black-theme"},on:{change:t.chooseKmzFolder},model:{value:t.indexChoosed,callback:function(e){t.indexChoosed=e},expression:"indexChoosed"}},[e("template",{slot:"suffixIcon"},[e("a-icon",{attrs:{type:"caret-down"}})],1),t._l(t.routes,(function(i){return e("a-select-option",{key:i,attrs:{value:i}},[t._v(" "+t._s(i)+" ")])}))],2),e("div",{staticClass:"label",staticStyle:{"text-align":"left","margin-left":"10px"}},[t._v(" 条航线 ")])],1):t._e()],1)},M=[],L=i("98fc"),N=i.n(L),E=i("c4e3"),D=i.n(E),O={props:{fileType:{type:String,default:""}},data(){return{indexChoosed:1,dialogVisible:!1,fileStatus:"",fileName:"",cameraNameText:"",autoFlightSpeed:{},missionConfig:{},originFileObj:{},Folders:[],globals:[],flightParams:{}}},computed:{routes(){const t=[];return this.Folders.forEach((e,i)=>{t.push(i+1)}),t}},watch:{fileType(t,e){t!==e&&e&&"done"===this.fileStatus&&this.parseDocument(this.originFileObj)}},methods:{chooseKmzFolder(){this.dialogVisible=!1;const t=this.Folders[this.indexChoosed-1];this.setFlightParamsByFolder(this.flightParams,t),this.$emit("upload",this.flightParams)},customRequest(t){this.$nextTick(()=>{t.onSuccess()})},handleChange(t){const{file:{status:e="",originFileObj:i,name:a=""}={}}=t;"done"===e&&(this.fileStatus=e,this.fileName=a,this.originFileObj=i,this.parseDocument(i)),"removed"===e&&(this.Folders=[],this.indexChoosed=1,this.flightParams={},this.fileStatus="",this.$emit("upload",{}))},parseDocument(t){if(!t)return;const e=new FileReader;e&&(e.onload=e=>{if(!this.checkType(e.target.result))return void this.$emit("upload",{});let i=null;if("kmz"===this.fileType){if(i=this.parseKmz(t),!i)return}else i=this.readFile(e.target.result);i&&this.$emit("upload",i)},e.readAsText(t))},checkType(t){if("kml"===this.fileType){const e=new DOMParser,i=e.parseFromString(t,"text/xml"),{nodeName:a}=i.documentElement;if("kml"!==a)return this.$message.error("选择的类型和上传文件格式不匹配，请检查后重试"),!1}const e=this.fileName.split(".");return"kmz"===this.fileType&&"kmz"!==e[e.length-1]?(this.$message.error("选择的类型和上传文件格式不匹配，请检查后重试"),!1):"json"!==this.fileType||"json"===e[e.length-1]||(this.$message.error("选择的类型和上传文件格式不匹配，请检查后重试"),!1)},readFile(t){let e=null;const i={};if("kml"===this.fileType){var a;const n=new N.a;e=n.xml2js(t);const{kml:{Document:{Placemark:{ExtendedData:{altitude:s,autoFlightSpeed:o,droneInfo:{droneCameras:{camera:{cameraName:l={}}={}}}={}}}}}}=e;this.cameraNameText=null!==(a=l.__text)&&void 0!==a?a:"";const r=Array.isArray(e.kml.Document.Folder.Placemark)?e.kml.Document.Folder.Placemark:[e.kml.Document.Folder.Placemark];i.flightPath=r.map(this.iterationParam),i.cruiseSpeed=parseFloat(parseFloat(null===o||void 0===o?void 0:o.__text).toFixed(2)),i.cruiseAltitude=parseFloat((parseFloat(null===s||void 0===s?void 0:s.__text)||120).toFixed(2)),i.cruiseGimbal=-45,i.GCSType=2}else if("json"===this.fileType){const e=JSON.parse(t);Object.assign(i,e.flightParams)}return i},iterationParam(t,e){const{ExtendedData:{actions:i,gimbalPitch:a,heading:n},Point:{coordinates:s}}=t,[o,l,r]=s.split(","),[c,u]=[parseFloat(l),parseFloat(o)],d={index:e++,altitude:parseFloat(r),latitude:c,longitude:u,gimbalPitch:parseFloat(a.__text),heading:parseFloat(n.__text),actions:this.iterationAction(i)};return d},iterationAction(t){if(!t)return[];Array.isArray(t)||(t=[t]);const e=[];return t.forEach((t,i)=>{const a={index:i+1,action:0};switch(t.__text){case"GimbalPitch":a.action=4,a.actionParams=parseFloat(t._param)/10,e.push(a);break;case"ShootPhoto":a.action=5,e.push(a);break;case"AircraftYaw":a.action=6,a.actionParams=parseFloat(t._param)/10,e.push(a);break;case"CameraZoom":if(a.action=7,this.cameraNameText.includes("H20")){const e=Number((parseFloat(t._param)/10*4/95.1).toFixed(2));a.actionParams=e<2?2:e,a.actionParams=e}else{const e=Number((parseFloat(t._param)/10/24).toFixed(2));a.actionParams=e<2?2:e,a.actionParams=e}e.push(a);break;default:break}}),e},parseKmz(t){const e={},i=new D.a;return i.loadAsync(t).then(t=>{Object.keys(t.files).forEach(i=>{"wpmz/waylines.wpml"!==i&&"wpmz\\waylines.wpml"!==i||t.files[i].async("string").then(t=>{const i=new N.a,a=i.xml2js(t);console.log("解析结果：",a);let{kml:{Document:{Folder:n,missionConfig:s}}}=a;if(this.missionConfig=s,Array.isArray(n)){if(1!==n.length)return this.dialogVisible=!0,this.Folders=n,this.flightParams=e,this.setFlightParamsByFolder(this.flightParams,n[0]),!1;[n]=n}this.setFlightParamsByFolder(e,n)}).catch(t=>{console.error(t),this.$message.error("解析异常！")})})},t=>{console.error(t),this.$message.error(`解析异常: ${this.fileName}: ${t.message}`)}).catch(t=>{console.error(t)}),e},setFlightParamsByFolder(t,e){this.globals=[];const{Placemark:i,autoFlightSpeed:a,executeHeightMode:n}=e;this.autoFlightSpeed=a;let s=i;Array.isArray(i)||(s=[i]),t.cruiseSpeed=parseFloat(a.__text),"relativeToStartPoint"===n.__text?t.heightMode=0:"EGM96"===n.__text?t.heightMode=1:"WGS84"===n.__text?t.heightMode=2:(n.__text,t.heightMode=0),t.cruiseAltitude=120,t.cruiseGimbal=-45,t.cruiseGimbalPitch=-45,t.GCSType=1,t.flightPath=s.map(this.iterationKMZ),this.globals.forEach(e=>{const{index:i,actions:a}=e;for(let n=i;n<t.flightPath.length;n+=1)t.flightPath[n].actions.push(...a)}),t.flightPath.forEach((e,i)=>{e.globalActionGroupActions&&e.globalActionGroupActions.length>0&&e.globalActionGroupActions.forEach(e=>{const{actionGroupStartIndex:a,actionGroupEndIndex:n,actions:s}=e;if(a<=n&&t.flightPath.length<=n+1){for(let e=a;e<=n;e+=1)i!==e&&s.forEach(i=>{switch([2,10,11].includes(i.action)||t.flightPath[e].actions.push(i),i.action){case 4:t.flightPath[e].gimbalPitch=i.actionParams;break;case 6:case 8:t.flightPath[e].heading=i.actionParams;break;default:break}});a!==n&&t.flightPath[a].actions.forEach(e=>{[10,11].includes(e.action)&&t.flightPath[n].actions.push({action:12}),[2].includes(e.action)&&t.flightPath[n].actions.push({action:3})})}});const a=[],n=[];e.actions.forEach(t=>{n.includes(t.action)||(a.push(t),n.push(t.action))}),e.actions=a}),t.flightPath.forEach(t=>{t.actions.forEach(e=>{4===e.action&&(t.gimbalPitch=e.actionParams),4===e.action?t.gimbalPitch=e.actionParams:6===e.action&&(t.heading=e.actionParams)})})},iterationKMZ(t,e){var i,a;const[n,s]=t.Point.coordinates.split(","),[o,l]=[parseFloat(s),parseFloat(n)],r={altitude:parseFloat(parseFloat(t.executeHeight).toFixed(2)),latitude:o,longitude:l,gimbalPitch:0,heading:0,speed:1,actions:[],globalActionGroupActions:[]};if(null!==t&&void 0!==t&&null!==(i=t.gimbalPitchAngle)&&void 0!==i&&i.__text&&(r.gimbalPitch=parseFloat(t.gimbalPitchAngle.__text)),t.waypointSpeed?r.speed=Number(t.waypointSpeed.__text):r.speed=parseFloat(this.autoFlightSpeed.__text),r.speed=parseFloat(r.speed.toFixed(2)),"smoothTransition"===(null===(a=t.waypointHeadingParam)||void 0===a||null===(a=a.waypointHeadingMode)||void 0===a?void 0:a.__text)?r.heading=Number(Number(t.waypointHeadingParam.waypointHeadingAngle.__text).toFixed(0)):r.heading=-9999,null!==t&&void 0!==t&&t.actionGroup){let i=[];i=Array.isArray(t.actionGroup)?t.actionGroup:[t.actionGroup];let a=[];i.forEach(t=>{const i=[],n=[];if(null!==t&&void 0!==t&&t.action&&(Array.isArray(t.action)?i.push(...t.action):i.push(t.action),i.forEach(i=>{const a=this.actionKMZ(i,null===t||void 0===t?void 0:t.actionTrigger,e);Array.isArray(a)?n.push(...a):n.push(a)})),a.push(...n),null!==t&&void 0!==t&&t.actionGroupStartIndex){const e=parseInt(t.actionGroupStartIndex.__text);let i=e;null!==t&&void 0!==t&&t.actionGroupEndIndex&&(i=parseInt(t.actionGroupEndIndex.__text)),r.globalActionGroupActions.push({actionGroupStartIndex:e,actionGroupEndIndex:i,actions:n})}}),a=a.filter(t=>null!=t.action),r.actions=a}return r},actionKMZ(t,e,i){var a,n,s,o,l,r;const c={action:null},u=t.actionActuatorFunc.__text;switch(u){case"hover":c.action=1,c.actionParams=parseFloat(t.actionActuatorFuncParam.hoverTime.__text);break;case"startRecord":c.action=2;break;case"stopRecord":c.action=3;break;case"gimbalRotate":const u=[];return"1"===t.actionActuatorFuncParam.gimbalYawRotateEnable.__text&&("relativeAngle"===t.actionActuatorFuncParam.gimbalRotateMode.__text?u.unshift({action:9,actionParams:Number(parseFloat(t.actionActuatorFuncParam.gimbalYawRotateAngle.__text).toFixed(2))}):u.unshift({action:8,actionParams:Number(parseFloat(t.actionActuatorFuncParam.gimbalYawRotateAngle.__text).toFixed(2))})),"1"===t.actionActuatorFuncParam.gimbalPitchRotateEnable.__text&&u.unshift({action:4,actionParams:Number(parseFloat(t.actionActuatorFuncParam.gimbalPitchRotateAngle.__text).toFixed(2))}),["multipleTiming","multipleDistance","reachPoint"].includes(null===e||void 0===e||null===(a=e.actionTriggerType)||void 0===a?void 0:a.__text)&&this.globals.push({index:i,actions:u}),u;case"takePhoto":case"accurateShoot":case"orientedShoot":const g=null===(n=t.actionActuatorFuncParam)||void 0===n||null===(n=n.aircraftHeading)||void 0===n?void 0:n.__text,m=null===(s=t.actionActuatorFuncParam)||void 0===s||null===(s=s.gimbalYawRotateAngle)||void 0===s?void 0:s.__text,p=null===(o=t.actionActuatorFuncParam)||void 0===o||null===(o=o.gimbalPitchRotateAngle)||void 0===o?void 0:o.__text,f=null===(l=t.actionActuatorFuncParam)||void 0===l||null===(l=l.focalLength)||void 0===l?void 0:l.__text,v=null===(r=t.actionActuatorFuncParam)||void 0===r||null===(r=r.accurateCameraType)||void 0===r?void 0:r.__text,b=[];if(e){var d,h;const t=null===(d=e.actionTriggerType)||void 0===d?void 0:d.__text,i=null===(h=e.actionTriggerParam)||void 0===h?void 0:h.__text;"multipleTiming"===t?b.push({action:10,actionParams:parseInt(parseFloat(i).toFixed(2))}):"multipleDistance"===t?b.push({action:11,actionParams:Number(parseFloat(i).toFixed(2))}):b.push({action:5})}else b.push({action:5});if(f){let t=0;t=["42","43","61"].includes(v)?Number((4*parseFloat(f)/95.1).toFixed(2)):Number((parseFloat(f)/24).toFixed(2)),b.unshift({action:7,actionParams:t})}return p&&b.unshift({action:4,actionParams:Number(parseFloat(p).toFixed(2))}),m&&b.unshift({action:8,actionParams:Number(parseFloat(m).toFixed(2))}),g&&b.unshift({action:6,actionParams:Number(parseFloat(g).toFixed(2))}),b;case"rotateYaw":c.action=6,c.actionParams=Number(parseFloat(t.actionActuatorFuncParam.aircraftHeading.__text).toFixed(2));break;case"zoom":c.action=7;let x=Number(parseFloat(t.actionActuatorFuncParam.focalLength.__text).toFixed(2));x=["42","43","61"].includes(this.missionConfig.payloadInfo.payloadEnumValue.__text)?Number((4*parseFloat(x)/95.1).toFixed(2)):Number((parseFloat(x)/24).toFixed(2)),c.actionParams=x;break;default:break}return c}}},I=O,j=(i("e2b9"),Object(v["a"])(I,F,M,!1,null,"14288ebd",null)),U=j.exports,R={components:{UploadFile:U},data(){return{kmlModal:!1,fileType:"kmz",uploadData:{}}},methods:{upload(t){this.uploadData=t,console.log("data:",t)},createKml(){"{}"!==JSON.stringify(this.uploadData)&&(this.kmlModal=!1,this.$emit("initKmlData",this.uploadData))}}},V=R,G=(i("d31b"),i("7422"),Object(v["a"])(V,w,S,!1,null,"506975da",null)),Z=G.exports,H=i("6c72"),B=i("ed08"),z=i("aa86"),K=i("e350"),q=i("b7c3"),W=i("3151");const $=i("c0f7"),Y=(i("9bfc"),i("8562")),Q=i("d90a"),X=i("d874"),J=i("2b18"),tt=i("e25d"),et=i("dfb4");let it=null,at=null,nt=null,st=-1,ot=-1,lt=null,rt=null,ct=null,ut=null,dt=null,ht=[],gt=null,mt=[],pt=[],ft=[],vt=[],bt=null,xt=null,yt=null,_t=null,Pt=null;const At=5e-6;var Tt={components:{Map:h["a"],Panel:x,PlanSlider:y["a"],Actions:k,KmlUpload:Z,ScreenShot:H["a"]},mixins:[W["a"]],data(){return{hiveTypes:q["h"],shrinkLeft:!1,pointsNum:0,distance:0,totalDistance:0,flyTime:0,missionName:"新建航点飞行任务",customName:"",address:"",cruiseSpeed:12,cruiseAltitude:100,cruiseGimbalPitch:0,lat:"",lng:"",speed:8,altitude:100,gimbalPitch:0,heading:-9999,headingMode:1,interstLoc:"",waypointTurnMode:1,waypointTurnValueMax:0,waypointTurnValue:0,finishedAction:"GO_HOME",settingType:"point",pointsList:[],currentSettingPoint:-1,finishedActionList:[{text:"自动返航",value:"GO_HOME"},{text:"悬停",value:"NO_ACTION"},{text:"自动降落",value:"AUTO_LAND"}],dragging:!1,siteID:"",signalRange:6e3,supportCustomLayerTypes:[],missionID:"",hangarPoint:[],isGPhoto:!1,globalUseStraightLine:!1,heightMode:0,globalWaypointTurnMode:2,globalHeadingMode:1,heightModes:[{text:"相对起飞点高度",value:0},{text:"海拔高度",value:1},{text:"椭球高度",value:2}],globalWaypointTurnModes:[{text:"协调转弯，不过点，提前转弯",value:1},{text:"直线飞行，飞行器到点停",value:2},{text:"曲线飞行，飞行器到点停",value:3},{text:"曲线飞行，飞行器过点不停",value:4}],globalHeadingModes:[{text:"沿航线方向",value:1},{text:"手动控制",value:2},{text:"锁定当前航偏角",value:3}],loading:!1,headFollow:!0,siteMode:0,siteSFMode:1,initDataFlag:!1,addressCalcFlag:!1,siteLocation:[]}},computed:{isExistTwoSelfLayer(){var t;return!!((null===this||void 0===this||null===(t=this.supportCustomLayerTypes)||void 0===t?void 0:t.length)>0&&this.supportCustomLayerTypes.find(t=>1===t))},isvThreeSelfLayer(){var t;return!!((null===this||void 0===this||null===(t=this.supportCustomLayerTypes)||void 0===t?void 0:t.length)>0&&this.supportCustomLayerTypes.find(t=>2===t))},heightModeImg(){switch(this.heightMode){case 0:return tt;case 1:return J;case 2:return et;default:return""}}},watch:{cruiseSpeed(t){this.getFlightTime()},currentSettingPoint(t){t>=0&&this.$nextTick(()=>{this.setCurrentPoint(t)})},lng(t){if(this.currentSettingPoint>=0){if(this.dragging)return;this.latlngUpdate({lat:this.lat,lng:t})}},lat(t){if(this.currentSettingPoint>=0){if(this.dragging)return;this.latlngUpdate({lat:t,lng:this.lng})}},altitude(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].altitude=t)},speed(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].speed=t)},gimbalPitch(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].gimbalPitch=t)},heading(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].heading=t)},headingMode(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].headingMode=t)},waypointTurnMode(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].waypointTurnMode=t)},waypointTurnValue(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].waypointTurnValue=t)},customName(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].name=t)},pointsNum(t){this.pointsList=[];for(let e=0;e<t;e+=1)this.pointsList.push({text:""+(e+1),value:e})}},beforeMount(){this.$root.$on("mapOnfinished",async t=>{it=t.L,at=t.map,lt=it.divIcon({iconSize:[24,24],className:"xl-point-icon",html:"<div></div>"}),ut=it.divIcon({iconSize:[24,24],className:"anchor-icon",html:"<div></div>"}),rt=it.divIcon({iconSize:[0,0],className:"xl-del-icon",html:'<div class="del-icon"><div class="del-black"></div><div class="del-white"></div></div>'}),ct=it.divIcon({className:"move-tip",html:"单击放置航点"}),bt=it.divIcon({className:"hangar-icon",iconSize:[48,48],html:"<div></div>"}),at.createPane("anchorLayers"),at.getPane("anchorLayers").style.zIndex=402,at.getPane("anchorLayers").style.pointerEvents="none",await this.drawSite(),this.initMap(),this.initData()})},beforeDestroy(){this.lineDel(),this.delLineLayer(),dt&&(at.removeLayer(dt),dt=null),xt&&(at.removeLayer(xt),xt=null),this.$root.$off("mapOnfinished"),it=null,at=null,st=-1,ot=-1},methods:{...Object(s["b"])({getSiteInfo:"mission/getSiteInfo",addMissions:"mission/addMissions",updateMissions:"mission/updateMissions",getMissionInfo:"mission/getMissionInfo"}),handleHeadingMode(t){if(5===t){const t=this.currentSettingPoint>=ht.length-1?0:this.currentSettingPoint+1;ht[this.currentSettingPoint].headingParam=[ht[t].lng84,ht[t].lat84,0],this.interstLoc=`${ht[t].lng84},${ht[t].lat84}`,this.setInterstMarker([ht[t].lng84,ht[t].lat84])}else this.setInterstMarker(null),1===t?this.heading=-9999:4===t&&(this.heading=90)},handleWaypointTurnMode(t){1===t&&4===t||(this.waypointTurnValue=0)},interstLocHandler(){const t=this.interstLoc;let e=!1;const i=t.split(",");if(2===i.length&&/^\d+(\.\d+)?$/.test(i[0])&&/^\d+(\.\d+)?$/.test(i[1])&&(e=!0),e){const t=parseFloat(i[0]),e=parseFloat(i[1]);this.setInterstMarker(i),ht[this.currentSettingPoint].headingParam=[t,e,0],at.panTo([i[1],i[0]])}else this.$message.warning("非法的经纬度！"),this.$nextTick(()=>{var t;(null===(t=ht[this.currentSettingPoint])||void 0===t||null===(t=t.headingParam)||void 0===t?void 0:t.length)>=2?(this.interstLoc=`${ht[this.currentSettingPoint].headingParam[0]},${ht[this.currentSettingPoint].headingParam[1]}`,this.setInterstMarker(ht[this.currentSettingPoint].headingParam)):(this.interstLoc="",ht[this.currentSettingPoint].headingParam&&(ht[this.currentSettingPoint].headingParam=[0,0,0]),this.setInterstMarker(null))})},setInterstMarker(t){if(t&&t.length>=2&&t[0]>0&&t[1]>0){const[e,i]=t,[a,n]=Object(z["c"])(e,i),s=[ht[this.currentSettingPoint].lat,ht[this.currentSettingPoint].lng];yt?yt.setLatLng([n,a]):yt=it.marker([n,a],{draggable:!0,icon:it.divIcon({className:"interest-icon",iconSize:[8,48],html:"<div></div>"})}).addTo(at).addTo(at).on("drag",t=>{let{latlng:{lat:e,lng:i}={}}=t;e=Number(e.toFixed(8)),i=Number(i.toFixed(8));const[a,n]=Object(z["b"])(i,e);this.interstLoc=`${a},${n}`,ht[this.currentSettingPoint].headingParam=[a,n,0];const s=[ht[this.currentSettingPoint].lat,ht[this.currentSettingPoint].lng];_t.setLatLngs([s,[e,i]])}).on("mouseover",()=>{l()(".move-tip").addClass("long").text("拖拽改变位置")}).on("mouseout",()=>{l()(".move-tip").removeClass("long").text("单击放置航点")}),_t?_t.setLatLngs([s,[n,a]]):_t=it.polyline([s,[n,a]],{color:"#1afa29",dashArray:"15",dashOffset:"15",weight:4}).addTo(at)}else yt&&at.removeLayer(yt),_t&&at.removeLayer(_t),yt=null,_t=null},setCurrentPoint(t){if(t>=0){const i=t-1;if(i>=0){const e=Number(it.latLng(ht[i].lat,ht[i].lng).distanceTo({lat:ht[t].lat,lng:ht[t].lng}).toFixed(2));let a=0;1!==ht[i].waypointTurnMode&&4!==ht[i].waypointTurnMode||(a=ht[i].waypointTurnValue||0),this.waypointTurnValueMax=e-a}else this.waypointTurnValueMax=0;var e;if(this.setActivePointIndex(t),this.lat=ht[t].lat84,this.lng=ht[t].lng84,this.headFollow=-9999===ht[t].heading,this.speed=ht[t].speed,this.altitude=ht[t].altitude,this.gimbalPitch=ht[t].gimbalPitch,this.heading=ht[t].heading,this.headingMode=ht[t].headingMode,this.waypointTurnMode=ht[t].waypointTurnMode,this.waypointTurnValue=ht[t].waypointTurnValue,this.interstLoc="",5===this.headingMode)(null===(e=ht[t])||void 0===e||null===(e=e.headingParam)||void 0===e?void 0:e.length)>=2&&(this.interstLoc=`${ht[t].headingParam[0]},${ht[t].headingParam[1]}`,this.setInterstMarker(ht[t].headingParam));else this.interstLoc="",this.setInterstMarker(null);this.customName=ht[t].name,this.$refs.actions&&this.$refs.actions.getData(ht[t])}},getTurnModeImg(t){switch(t){case 1:return $;case 2:return Y;case 3:return Q;case 4:return X;default:return""}},headFollowChange(t){this.currentSettingPoint>=0&&(t?ht[this.currentSettingPoint].heading=-9999:(ht[this.currentSettingPoint].heading=90,this.heading=90))},latlngUpdate({lat:t,lng:e}){const[i,a]=Object(z["c"])(e,t);ht[this.currentSettingPoint].setLatLng([a,i]),this.updateCurrentPoint({lng:i,lat:a,lng84:e,lat84:t,index:this.currentSettingPoint})},beforeCarouselChange(t,e){this.currentSettingPoint=e},handlePanel(t){switch(t){case"latUp":this.lat=Number((this.lat+At).toFixed(8));break;case"latDown":this.lat=Number((this.lat-At).toFixed(8));break;case"lngUp":this.lng=Number((this.lng+At).toFixed(8));break;case"lngDown":this.lng=Number((this.lng-At).toFixed(8));break;default:break}},chosenList(t){this.currentSettingPoint>=0&&(ht[this.currentSettingPoint].actions=t)},async drawSite(){const{query:{siteID:t=""}={}}=this.$route;if(!t)return;this.siteID=t;const{siteLocation:e=[],siteMode:i=0,siteSFMode:a=1,hiveInfo:n={},signalRange:s=this.signalRange,supportCustomLayerTypes:o=[]}=await this.getSiteInfo(t);if(this.siteMode=i,this.siteSFMode=a,this.siteLocation=e,this.supportCustomLayerTypes=o,this.signalRange=s>0?s:this.signalRange,e.length>0&&e[1]&&e[0]){const[t,a]=Object(z["c"])(e[0],e[1]);if(this.hiveTypes.includes(this.siteMode)){this.hangarPoint=[a,t];const e=null===n||void 0===n?void 0:n.hiveModel;let s="hangar-icon";e&&(s=`${s} ${this.getSiteIconClassName(i,e)}`),bt=it.divIcon({className:s,iconSize:[48,48],html:"<div></div>"}),xt=it.marker(this.hangarPoint,{icon:bt}).addTo(at),1===this.siteSFMode&&it.circle(this.hangarPoint,{color:"grey",fillColor:"grey",fillOpacity:.5,radius:this.signalRange}).addTo(at)}at.setView([a,t])}},initMap(){Object(K["b"])("route","route","waypoint")&&this.eventBind()},initKmlData(t){this.lineDel(),this.initDataFlag=!0;const{heightMode:e=0,globalWaypointTurnMode:i=1,cruiseAltitude:a="",cruiseSpeed:n="",flightPath:s=[],cruiseGimbalPitch:o="",cruiseGimbal:l="",isGPhoto:r=!1,globalUseStraightLine:c=1}=t;this.cruiseAltitude=a,this.cruiseSpeed=n,this.isGPhoto=r,this.globalUseStraightLine=2===c,this.heightMode=e,this.globalWaypointTurnMode=i,this.cruiseGimbalPitch=o||l,this.$nextTick(()=>{s.forEach(t=>{const e=[];t.actions&&t.actions.length&&t.actions.forEach((t,i)=>{e.push({key:t.action,["value_"+i]:t.actionParams})});const[i,a]=Object(z["c"])(t.longitude.toFixed(8),t.latitude.toFixed(8));let n=t.heading||0;1===t.headingMode&&(n=-9999),this.pointDraw({lat:a,lng:i,lat84:t.latitude,lng84:t.longitude,altitude:t.altitude||this.altitude,speed:t.speed||this.speed,gimbalPitch:t.gimbalPitch||0,headingMode:t.headingMode||1,waypointTurnMode:t.waypointTurnMode||1,waypointTurnValue:t.waypointTurnValue||0,headingParam:t.headingParam||null,heading:n,name:t.name||this.customName,actions:e},!1)}),this.fit()})},initData(){const{id:t=""}=this.$route.query;t&&(this.missionID=t,this.getMissionInfo({missionID:this.missionID}).then(({data:t})=>{const{missionName:e,flightParams:{heightMode:i=0,globalWaypointTurnMode:a=1,cruiseAltitude:n="",cruiseSpeed:s="",cruiseGimbalPitch:o="",flightPath:l=[],isGPhoto:r=!1,globalUseStraightLine:c=1,globalHeadingMode:u=1}={}}=t;this.initDataFlag=!0,this.globalHeadingMode=u,this.missionName=e,this.heightMode=i,this.globalWaypointTurnMode=a,this.cruiseAltitude=n,this.cruiseSpeed=s,this.cruiseGimbalPitch=o,this.isGPhoto=r,this.globalUseStraightLine=2===c,this.$nextTick(()=>{l.forEach(t=>{const e=[];t.actions&&t.actions.length&&t.actions.forEach((t,i)=>{e.push({key:t.action,["value_"+i]:t.actionParams})});const[i,a]=Object(z["c"])(t.longitude,t.latitude);this.pointDraw({lat:Number(a.toFixed(8)),lng:Number(i.toFixed(8)),lat84:t.latitude,lng84:t.longitude,altitude:t.altitude,speed:t.speed,gimbalPitch:t.gimbalPitch,headingMode:t.headingMode,waypointTurnMode:t.waypointTurnMode,waypointTurnValue:t.waypointTurnValue,headingParam:t.headingParam,heading:t.heading,name:t.name,actions:e},!1)}),this.fit()})}))},closeActionsSelect(){this.$refs.actions.closeActionsSelect()},sliderChangeEvent(t,e){this[e]=t},eventBind(){at.on("click",t=>{this.initDataFlag=!1;const e=Number(t.latlng.lat.toFixed(8)),i=Number(t.latlng.lng.toFixed(8)),[a,n]=Object(z["b"])(i,e);this.waypointTurnValue=0,this.pointDraw({lat:e,lng:i,lat84:n,lng84:a},!1)}).on("mousemove",t=>{it&&(dt?dt.setLatLng([t.latlng.lat,t.latlng.lng]):dt=it.marker([t.latlng.lat,t.latlng.lng],{icon:ct,pane:"tooltipPane"}).addTo(at))})},updateCurrentPoint(t){const{lat:e,lng:i,lng84:a,lat84:n,index:s}=t;ht[s].lat=e,ht[s].lng=i,ht[s].lat84=n,ht[s].lng84=a,this.lineDraw()},pointDraw(t,e){var i,a,n,s,o,r,c,u;if(!t||!t.lat||!t.lng||this.dragging)return;if(!t.lng84||!t.lat84){const[e,i]=Object(z["b"])(t.lng,t.lat);t.lng84=e,t.lat84=i}if(e){this.waypointTurnValue=0;const{lat:e,lng:i}=t;ot=vt.findIndex(t=>{const[a,n]=t;return n===e&&a===i})}const d=it.marker([t.lat,t.lng],{icon:lt,draggable:!0}).addTo(at).on("click",t=>{this.currentSettingPoint=l()(t.target._icon).html()-1,this.$refs.pointCarousel&&this.$refs.pointCarousel.goTo(this.currentSettingPoint)}).on("contextmenu",t=>{this.delPt(t)}).on("dragstart",t=>{st=l()(t.target._icon).html()-1}).addTo(at).on("drag",t=>{this.dragging=!0;let{latlng:{lat:e,lng:i}={}}=t;e=Number(e.toFixed(8)),i=Number(i.toFixed(8));const[a,n]=Object(z["b"])(i,e);st===this.currentSettingPoint&&(this.lat=n,this.lng=a),this.updateCurrentPoint({lat:e,lng:i,lat84:n,lng84:a,index:st})}).on("dragend",()=>{setTimeout(()=>{this.dragging=!1},500)}).on("mouseover",()=>{l()(".move-tip").addClass("long").text("右击删除点，拖拽改变位置")}).on("mouseout",()=>{l()(".move-tip").removeClass("long").text("单击放置航点")});if(Object.assign(d,{lat:t.lat||"",lng:t.lng||"",lat84:t.lat84||"",lng84:t.lng84||"",altitude:null!==(i=t.altitude)&&void 0!==i?i:this.cruiseAltitude,speed:null!==(a=t.speed)&&void 0!==a?a:this.cruiseSpeed,gimbalPitch:null!==(n=t.gimbalPitch)&&void 0!==n?n:this.cruiseGimbalPitch,headingMode:null!==(s=t.headingMode)&&void 0!==s?s:this.globalHeadingMode,waypointTurnMode:null!==(o=t.waypointTurnMode)&&void 0!==o?o:this.globalWaypointTurnMode,waypointTurnValue:null!==(r=t.waypointTurnValue)&&void 0!==r?r:this.waypointTurnValue,headingParam:t.headingParam||null,heading:null!==(c=t.heading)&&void 0!==c?c:this.heading,name:null!==(u=t.name)&&void 0!==u?u:this.customName,actions:t.actions||[]}),e){const t=ot+1;ht.splice(t,0,d),this.currentSettingPoint=t}else ht.push(d),this.currentSettingPoint=ht.length-1;this.$nextTick(()=>{this.$refs.pointCarousel&&this.$refs.pointCarousel.goTo(this.currentSettingPoint)}),this.lineDraw()},lineDraw(){const t=ht.reduce((t,e)=>(t.push([e._latlng.lat,e._latlng.lng]),t),[]);nt?nt.setLatLngs(t):nt=it.polyline(t,{color:"yellow",weight:4}).addTo(at),this.drawHangarLine(),this.anchorDraw(),this.getEveryDistance(),this.addressCalc(),this.delBtnSet(),this.setEveryPointIndex(),this.distanceCalc(),this.pointsNum=ht.length},anchorDraw(){ft.length>0&&this.anchorDel();const t=ht.length;if(!(t<2)){for(let e=0;e<t-1;e+=1){const[t,i]=Object(c["midpoint"])(Object(r["c"])([ht[e].lng,ht[e].lat]),Object(r["c"])([ht[e+1].lng,ht[e+1].lat])).geometry.coordinates;vt.push([Number(t.toFixed(8)),Number(i.toFixed(8))])}vt.forEach(t=>{ft.push(it.marker([t[1],t[0]],{icon:ut,pane:"anchorLayers"}).addTo(at).on("click",t=>{this.anchorAddPoint(t.latlng)}))})}},anchorDel(){ft.forEach(t=>{at.removeLayer(t)}),ft=[],vt=[]},getEveryDistance(){mt.length&&(mt.forEach(t=>{at.removeLayer(t)}),mt=[],pt=[]),ht.forEach((t,e)=>{const i=t.getLatLng();let a=0,n=!1;if(e>0?(n=!0,a=Number((ht[e-1].getLatLng().distanceTo(i)/1e3).toFixed(2))):0===e&&this.hiveTypes.includes(this.siteMode)&&0!==this.hangarPoint.length&&(n=!0,a=Number((i.distanceTo({lat:this.hangarPoint[0],lng:this.hangarPoint[1]})/1e3).toFixed(2))),n){pt.push(a);const t=it.marker([i.lat,i.lng],{icon:it.divIcon({className:"distance-tip",html:a+"km"})}).addTo(at);mt.push(t)}})},async addressCalc(){if(!ht[0])return;if(this.initDataFlag&&this.addressCalcFlag)return;this.addressCalcFlag=!0;const{info:t="",regeocode:e={}}=await Object(B["c"])(ht[0].lng,ht[0].lat);if("OK"===t){const{addressComponent:{province:t="",city:i="",district:a="",township:n=""}={}}=e;this.address=`${t}${i}${a}${n}`}else this.address=""},distanceCalc(){this.distance=0,this.flyTime=0;let t=0;ht.forEach((e,i)=>{i>0?this.distance+=ht[i-1].getLatLng().distanceTo(e.getLatLng()):0===i&&0!==this.hangarPoint.length&&(t=ht[0].getLatLng().distanceTo({lat:this.hangarPoint[0],lng:this.hangarPoint[1]}))}),this.totalDistance=this.distance+t,this.distance=Number((this.totalDistance/1e3).toFixed(2)),this.getFlightTime()},getFlightTime(){this.totalDistance&&(this.flyTime=Number(((this.totalDistance/this.cruiseSpeed+3*(ht.length+2)+160)/60).toFixed(2)))},drawHangarLine(){ht.length&&this.hangarPoint.length&&(Pt?Pt.setLatLngs([this.hangarPoint,[ht[0].lat,ht[0].lng]]):Pt=it.polyline([this.hangarPoint,[ht[0].lat,ht[0].lng]],{color:"yellow",weight:4}).addTo(at))},fit(){var t;if(at&&nt)if((null===this||void 0===this||null===(t=this.hangarPoint)||void 0===t?void 0:t.length)>=2){const t=nt.getLatLngs().reduce((t,e)=>(t.push([e.lat,e.lng]),t),[]);at.fitBounds(it.polyline([this.hangarPoint,...t]).getBounds())}else at.fitBounds(nt.getBounds())},delHangarLine(){Pt&&(at.removeLayer(Pt),Pt=null)},anchorAddPoint(t){this.pointDraw({lat:Number(t.lat.toFixed(8)),lng:Number(t.lng.toFixed(8))},!0)},delPt(t){at.removeLayer(t.target),ht.some((e,i)=>{if(e._latlng.lat===t.latlng.lat&&e._latlng.lng===t.latlng.lng)return i<=this.currentSettingPoint&&(this.currentSettingPoint-=1),ht.splice(i,1),!0}),(!ht||ht.length<=0)&&(gt&&(at.removeLayer(gt),gt=null),this.delHangarLine()),l()(".move-tip").removeClass("long").text("单击放置航点"),this.lineDraw()},lineDel(){gt&&(at.removeLayer(gt),gt=null),ht.forEach(t=>{at.removeLayer(t)}),ht=[],this.currentSettingPoint=-1,st=-1,ot=-1,l()(".move-tip").show(),this.lineDraw(),this.delHangarLine()},delLineLayer(){nt&&(at.removeLayer(nt),nt=null)},setEveryPointIndex(){ht.forEach((t,e)=>{l()(t._icon).html(""+(e+1))}),this.setCurrentPoint(this.currentSettingPoint)},setActivePointIndex(t){l()(".xl-point-icon").removeClass("xl-active-icon"),ht.forEach(e=>{Number(l()(e._icon).html())===t+1&&l()(e._icon).addClass("xl-active-icon")})},delBtnSet(){if(!ht[ht.length-1])return;const t=ht[ht.length-1];gt?gt.setLatLng([t.lat,t.lng]):(gt=it.marker([t.lat,t.lng],{icon:rt,draggable:!0}).addTo(at).on("click",()=>{this.lineDel()}),gt.bindTooltip("<div>删除航线</div>",{direction:"bottom",offset:it.point(33,15),className:"del-tip"}).addTo(at).on("mouseover",()=>{l()(".move-tip").hide()}).on("mouseout",()=>{l()(".move-tip").show()}))},submitTask(){if(!ht||ht.length<=1)return void this.$message.warning("至少创建两个航点！");const t=[].concat(pt);this.hiveTypes.includes(this.siteMode)&&0!==this.hangarPoint.length&&t.shift();const e=t.findIndex(t=>1e3*t>1500);if(-1!==e){const t=e+1;return void this.$message.warning(`第${t}个点和第${t+1}个点距离需要小于1.5km，请重新绘制`)}if(1===this.siteSFMode&&0!==this.hangarPoint.length){const t=ht.find(t=>t.getLatLng().distanceTo({lat:this.hangarPoint[0],lng:this.hangarPoint[1]})>this.signalRange);if(t)return void this.$message.warning(`所有航点距离机库的位置不能超过${this.signalRange}米，请重新绘制`)}if(this.missionName.length<3)return void this.$message.warning("名称至少三位字符！");this.loading=!0;const i=document.getElementById("map");d.a.toPng(i,{width:i.clientWidth,height:i.clientHeight,quality:1}).then(t=>{this.loading=!1,this.$refs.screenShot.saveThumbFun(t,t=>{this.saveTask(t)})}).catch(()=>{this.loading=!1,this.saveTask(null)})},async saveTask(t){const e=[];ht.forEach((t,i)=>{if(!ht[i])return;const a={index:i,name:t.name,latitude:t.lat84,longitude:t.lng84,altitude:t.altitude,gimbalPitch:t.gimbalPitch,heading:t.heading,headingMode:t.headingMode||1,waypointTurnMode:t.waypointTurnMode||1,waypointTurnValue:t.waypointTurnValue||0,headingParam:t.headingParam||null,speed:t.speed,actions:t.actions.length?t.actions.map((t,e)=>({index:e,action:t.key,actionParams:t["value_"+e]})):[]};1!==a.headingMode&&4!==a.headingMode||(a.headingParam=[a.heading]),e.push(a)});const i={missionName:this.missionName,missionType:1,ASType:2,UAVModel:"",cameraModel:"",siteID:this.siteID,flightParams:{GCSType:1,heightMode:this.heightMode,globalWaypointTurnMode:this.globalWaypointTurnMode,cruiseSpeed:this.cruiseSpeed,cruiseAltitude:this.cruiseAltitude,cruiseGimbalPitch:this.cruiseGimbalPitch,cruiseUAVYaw:90,isGPhoto:this.isGPhoto,THPTotal:this.pointsNum,globalHeadingMode:this.globalHeadingMode,flightPath:e}};t&&(i.thumbnailBase64=t);let a="add";this.missionID&&(i.missionID=this.missionID,a="update");const n=await this[a+"Missions"](i);0===n&&this.$router.push("/route")}}},Ct=Tt,kt=(i("7dc2"),i("9532"),Object(v["a"])(Ct,a,n,!1,null,"168c7804",null));e["default"]=kt.exports},"626b":function(t,e,i){},7422:function(t,e,i){"use strict";i("f44a")},"75a8":function(t,e,i){t.exports=i.p+"img/del_white.40568959.svg"},"7dc2":function(t,e,i){"use strict";i("0bb1")},"805b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAA4ZJREFUSEutlk1oVFcUx//3JROzmJSqUHCh0FJo6TRVqUIUBWkXpSmtrZDZFJPc80wCWaS4ERFkmIWIi3aREEqSee/Og6ZIUqj0A0opdOE3VWtbR0sJOJhu/FgFJMTn3CM3zB3evL44ztgHwwz3nXt+55z7v+eMmJubawOAbDZbMd++728mosVcLudkMhlh1p71KZVKnM/ntfVh9ln/wvzo6+vTExMTHel0+nsA7wA4TkQnm4FZiFLqM2b+HMDZ5eXlD0dHRx/Oz887qyCTTbFYzGitb5gomPkf13Vfi0bUKKtIRa4D2Fr1s9N13SuGUQMFQfBWpVL5o+rwIhHtbhH0K4B9a4KUUtuY+fcq6CYRZVoBeZ73ixDi3aqft4noWl1Gs7Oz61dWVhYAbADwFREdZGZh6tuobFExPRVkDYMg2Ki17i6Xy+cA6GZUZ8/oqaBSqSTy+fzjaOQmXbOeyWS4mYx83/8RQG9i6Z5H3jYTG4zv++cBrArJcZwdg4ODV+vOqBl5m8CEELVMlVKvM/MhAJ8AeMVCmXm367oXm5K3vZDWyeTkZLqzs3O/EOIAAPOJP/+GYbh9ZGTkQR0oJu8bRNSddDZKqV5m3g/gYwAvxW2Y+bzjOKeklKbL1LcgU2el1IvMvAggDeBrIvrUOlFK9TDzRwD6ALyaEMCiEOI0gHkp5W9BEGwZGBi48x+QlffMzMzL7e3tW6WUZ6ql6XUcp5+ZP0jKTgjxs9b6266uLj+bzT4yNp7nHRVCnASwEIbhjuHh4aVar4vKe2pqalNHR8cRZj4IYGMC4Aozf6e1/mZoaOhW/L3v+9cAbK+u9xDR5doZGRUVi8V1zHwGwHvxzUKI21rrH0x5iOhC/L5FO4Pv+w17XTcz/xmDnAXwpZTydFTOdsZEbSPd2/TLbeadEGKXlPJSXHVR0N+VSuVAtDSNZlNk6H0B4DCAuwC6iej+mhfWHLKUcrWESdEnCcO2KzvblpaWFsbGxlbqJmx88AE4R0R7WwWNj4+vMxCzP5fLtZt+mThhWwSt/l9QSh1j5hMArodhuK9O3v9HRkmjHEC9vI1RoVB403Gcv0y6po24rrunmdJFQA3lHR3lt4jojRZBa8vbXNjp6ekXUqmUyWgzgAIRDTUzyteSt5TyQa0F2ZtdKBQ2tLW19ZTL5Z/MWjOj3NhbmOd576dSqav9/f33rLyfAOn2wFPBLaRBAAAAAElFTkSuQmCC"},8558:function(t,e,i){"use strict";var a=i("cfe9"),n=i("b5db"),s=i("c6b6"),o=function(t){return n.slice(0,t.length)===t};t.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":a.Bun&&"string"==typeof Bun.version?"BUN":a.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(a.process)?"NODE":a.window&&a.document?"BROWSER":"REST"}()},8562:function(t,e,i){t.exports=i.p+"img/straight-flight.16cd0c3e.svg"},"91fa":function(t,e,i){},9532:function(t,e,i){"use strict";i("5365")},9568:function(t,e,i){},"98fc":function(t,e,i){var a,n,s;(function(i,o){"use strict";n=[],a=o,s="function"===typeof a?a.apply(e,n):a,void 0===s||(t.exports=s)})(0,(function(t){"use strict";return function(e){var i="3.4.4";function a(){e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",e.jsAttributeFilter=e.jsAttributeFilter,e.jsAttributeConverter=e.jsAttributeConverter,e.attributeConverters=e.attributeConverters||[],e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],e.xmldomOptions=e.xmldomOptions||{},void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!0),void 0===e.ignoreRoot&&(e.ignoreRoot=!1),void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),void 0===e.selfClosingElements&&(e.selfClosingElements=!0),void 0===e.keepCData&&(e.keepCData=!1),void 0===e.keepText&&(e.keepText=!1),void 0===e.jsDateUTC&&(e.jsDateUTC=!1)}function n(){function t(t){var e=String(t);return 1===e.length&&(e="0"+e),e}"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!==typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){var e=1e3;return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/e).toFixed(3)).slice(2,5)+"Z"})}e=e||{},a(),n();var s={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function o(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!==e||(e=t.nodeName),e}function l(t){return t.prefix}function r(t){return"string"===typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):t}function c(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")}function u(t,i,a){switch(e.arrayAccessForm){case"property":t[i]instanceof Array?t[i+"_asArray"]=t[i]:t[i+"_asArray"]=[t[i]];break}if(!(t[i]instanceof Array)&&e.arrayAccessFormPaths.length>0){for(var n=!1,s=0;s<e.arrayAccessFormPaths.length;s++){var o=e.arrayAccessFormPaths[s];if("string"===typeof o){if(o===a){n=!0;break}}else if(o instanceof RegExp){if(o.test(a)){n=!0;break}}else if("function"===typeof o&&o(i,a)){n=!0;break}}n&&(t[i]=[t[i]])}}function d(t){var e=60,i=t.split(/[-T:+Z]/g),a=new Date(i[0],i[1]-1,i[2]),n=i[5].split(".");if(a.setHours(i[3],i[4],n[0]),n.length>1&&a.setMilliseconds(n[1]),i[6]&&i[7]){var s=i[6]*e+Number(i[7]),o=/\d\d-\d\d:\d\d$/.test(t)?"-":"+";s=0+("-"===o?-1*s:s),a.setMinutes(a.getMinutes()-s-a.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())));return a}function h(t,i,a){if(e.datetimeAccessFormPaths.length>0)for(var n=a.split(".#")[0],s=0;s<e.datetimeAccessFormPaths.length;s++){var o=e.datetimeAccessFormPaths[s];if("string"===typeof o){if(o===n)return d(t)}else if(o instanceof RegExp){if(o.test(n))return d(t)}else if("function"===typeof o&&o(n))return d(t)}return t}function g(t){for(var i={},a=t.childNodes,n=0;n<a.length;n++){var l=a.item(n);if(l.nodeType===s.ELEMENT_NODE){var r=o(l);e.ignoreRoot?i=p(l,r):i[r]=p(l,r)}}return i}function m(t,i){for(var a={__cnt:0},n=t.childNodes,r=0;r<n.length;r++){var d=n.item(r),g=o(d);d.nodeType!==s.COMMENT_NODE&&(a.__cnt++,null==a[g]?(a[g]=p(d,i+"."+g),u(a,g,i+"."+g)):(a[g]instanceof Array||(a[g]=[a[g]],u(a,g,i+"."+g)),a[g][a[g].length]=p(d,i+"."+g)))}for(var m=0;m<t.attributes.length;m++){var f=t.attributes.item(m);a.__cnt++;for(var v=f.value,b=0;b<e.attributeConverters.length;b++){var x=e.attributeConverters[b];x.test.call(null,f.name,f.value)&&(v=x.convert.call(null,f.name,f.value))}a[e.attributePrefix+f.name]=v}var y=l(t);return y&&(a.__cnt++,a.__prefix=y),a["#text"]&&(a.__text=a["#text"],a.__text instanceof Array&&(a.__text=a.__text.join("\n")),e.escapeMode&&(a.__text=c(a.__text)),e.stripWhitespaces&&(a.__text=a.__text.trim()),delete a["#text"],"property"===e.arrayAccessForm&&delete a["#text_asArray"],a.__text=h(a.__text,"#text",i+".#text")),a.hasOwnProperty("#cdata-section")&&(a.__cdata=a["#cdata-section"],delete a["#cdata-section"],"property"===e.arrayAccessForm&&delete a["#cdata-section_asArray"]),1===a.__cnt&&a.__text&&!e.keepText?a=a.__text:0===a.__cnt&&"text"===e.emptyNodeForm?a="":a.__cnt>1&&void 0!==a.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""===a.__text||""===a.__text.trim())&&delete a.__text,delete a.__cnt,e.keepCData||a.hasOwnProperty("__text")||!a.hasOwnProperty("__cdata")||1!==Object.keys(a).length?(e.enableToStringFunc&&(a.__text||a.__cdata)&&(a.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),a):a.__cdata?a.__cdata:""}function p(t,e){return t.nodeType===s.DOCUMENT_NODE?g(t):t.nodeType===s.ELEMENT_NODE?m(t,e):t.nodeType===s.TEXT_NODE||t.nodeType===s.CDATA_SECTION_NODE?t.nodeValue:null}function f(t,i,a,n){var s="<"+(t&&t.__prefix?t.__prefix+":":"")+i;if(a)for(var o=0;o<a.length;o++){var l=a[o],c=t[l];e.escapeMode&&(c=r(c)),s+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?s+='"'+c+'"':s+="'"+c+"'"}return s+=n?" />":">",s}function v(t,e){return"</"+(t&&t.__prefix?t.__prefix+":":"")+e+">"}function b(t,e){return-1!==t.indexOf(e,t.length-e.length)}function x(t,i){return!!("property"===e.arrayAccessForm&&b(i.toString(),"_asArray")||0===i.toString().indexOf(e.attributePrefix)||0===i.toString().indexOf("__")||t[i]instanceof Function)}function y(t){var e=0;if(t instanceof Object)for(var i in t)x(t,i)||e++;return e}function _(t){var i=[];if(t instanceof Object)for(var a in t)-1===a.toString().indexOf("__")&&0===a.toString().indexOf(e.attributePrefix)&&i.push(a);return i}function P(t){var i="";return t.__cdata&&(i+="<![CDATA["+t.__cdata+"]]>"),(t.__text||"number"===typeof t.__text||"boolean"===typeof t.__text)&&(e.escapeMode?i+=r(t.__text):i+=t.__text),i}function A(t){var i="";return t instanceof Object?i+=P(t):null!==t&&(e.escapeMode?i+=r(t):i+=t),i}function T(t,e,i){var a="";if(0===t.length)a+=f(t,e,i,!0);else for(var n=0;n<t.length;n++)a+=C(t[n],e,_(t[n]));return a}function C(t,i,a){var n="";if(e.jsAttributeFilter&&e.jsAttributeFilter.call(null,i,t))return n;if(e.jsAttributeConverter&&(t=e.jsAttributeConverter.call(null,i,t)),void 0!==t&&null!==t&&""!==t||!e.selfClosingElements)if("object"===typeof t)if("[object Array]"===Object.prototype.toString.call(t))n+=T(t,i,a);else if(t instanceof Date)n+=f(t,i,a,!1),n+=e.jsDateUTC?t.toUTCString():t.toISOString(),n+=v(t,i);else{var s=y(t);s>0||"number"===typeof t.__text||"boolean"===typeof t.__text||t.__text||t.__cdata?(n+=f(t,i,a,!1),n+=k(t),n+=v(t,i)):e.selfClosingElements?n+=f(t,i,a,!0):(n+=f(t,i,a,!1),n+=v(t,i))}else n+=f(t,i,a,!1),n+=A(t),n+=v(t,i);else n+=f(t,i,a,!0);return n}function k(t){var e="",i=y(t);if(i>0)for(var a in t)if(!x(t,a)){var n=t[a],s=_(n);e+=C(n,a,s)}return e+=A(t),e}function w(i){if(void 0===i)return null;if("string"!==typeof i)return null;var a=null,n=null;if(t)a=new t(e.xmldomOptions),n=a.parseFromString(i,"text/xml");else if(window&&window.DOMParser){a=new window.DOMParser;var s=null,o=window.ActiveXObject||"ActiveXObject"in window;if(!o&&document.all&&!document.addEventListener)try{s=a.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(l){s=null}try{n=a.parseFromString(i,"text/xml"),null!==s&&n.getElementsByTagNameNS(s,"parsererror").length>0&&(n=null)}catch(l){n=null}}else 0===i.indexOf("<?")&&(i=i.substr(i.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i);return n}this.asArray=function(t){return void 0===t||null===t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"===typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"===typeof t?d(t):t},this.xml2dom=function(t){return w(t)},this.dom2js=function(t){return p(t,null)},this.js2dom=function(t){var e=this.js2xml(t);return w(e)},this.xml2js=function(t){var e=w(t);return null!=e?this.dom2js(e):null},this.js2xml=function(t){return k(t)},this.getVersion=function(){return i}}}))},"9adc":function(t,e,i){"use strict";var a=i("8558");t.exports="NODE"===a},"9bfc":function(t,e,i){t.exports=i.p+"img/turn-in-advance.a1c0f872.svg"},a640:function(t,e,i){"use strict";var a=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&a((function(){i.call(null,e||function(){return 1},1)}))}},c0f7:function(t,e,i){t.exports=i.p+"img/coordinated-turn.74c7b4ac.svg"},d31b:function(t,e,i){"use strict";i("91fa")},d58f:function(t,e,i){"use strict";var a=i("59ed"),n=i("7b0b"),s=i("44ad"),o=i("07fa"),l=TypeError,r="Reduce of empty array with no initial value",c=function(t){return function(e,i,c,u){var d=n(e),h=s(d),g=o(d);if(a(i),0===g&&c<2)throw new l(r);var m=t?g-1:0,p=t?-1:1;if(c<2)while(1){if(m in h){u=h[m],m+=p;break}if(m+=p,t?m<0:g<=m)throw new l(r)}for(;t?m>=0:g>m;m+=p)m in h&&(u=i(u,h[m],m,d));return u}};t.exports={left:c(!1),right:c(!0)}},d874:function(t,e,i){t.exports=i.p+"img/curve-flight2.40b41d8d.svg"},d90a:function(t,e,i){t.exports=i.p+"img/curve-flight1.ba1ac4c1.svg"},dbc2:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAy9JREFUSEutlUtoHWUUx39n7sKAQYSQVFpRcNGFUlFQfHTho1SRWhXEhUhl5kzgVtG40IV1IXGjLgTlSrGFO+fLjV0KPpBSRbSCFhREFBRELIrS+KqvoKS51znylUlMmpv70JzdzPd9/9+c/3fOGWGIaDabu5IkaQAvqOozQxxFhtlsZt8Dm6ozJ4C6qr4+iMbAIDN7EthXluWttVotcfcmMOHuL+Z5fm8/2ECg2dnZiU6n8wNwVFVviKJFUeQi0hSRA1mW3bchIDM7ClwH/OHue9z9vSRJvgPmVXXJyp6svhmZ2c3AEXc/IiJR9PIIBM4BtqvqsX7ZxPVBQL8C56rq6b1m9hzwEPCOqt44CKQvKIRwv7vvB/aq6sEK9Apwu4hszbLsy/8NajQaZ42Oji4A36rqBVEwhBDvZxY4qKp7B4X0zMjM3gR2JklyRZqmH1XZ/A38qarxfoaKrncUQrjM3T8Gjqnq9gryBPA4cJeqvjQUZb1iMLOvgIvcfUue5yeazeaFSZJ8DXyuqpcMC+lqXQhB3b0AHlPVp6psPgMuHrYAqrOxPa5cY52ZdYBTqnp23DgzM7OjLMu3gMOqumvYbEIIb7j7TatAZvY88ACwe2lYmlkcPRNlWY5NTk7+8h9Ah9z9nmVQCGGbu38qIh9mWXZVNc8eFZFoX6qqrWEhlcasiOxZBhVF8YmIXLp0D+4uIYQS+FlVx9eDhBB2uvuOqrAcqAHHsyw7ICJeFMW/oBDCbnd/beXIN7NXgduA61X13fVAZmZAdsb6ySzLxteAzOwwcMuKeXYt8D7wtqrGr+0ZrVZry+Li4ml3arWatNvtk/V6/a811plZnMDXrAD9CIy32+3N9Xp9rh+o1/oq68wsToHz46W5+yFgzN335Xn+9JkiZnY3cHUvcRH5Jk3TZ7tZF22KhxPA3f3OPM9f7ia21Bd9svwpy7JN3UC/xx+ZiOyfn59/eGpq6lQvoVarNbawsCAjIyOxypYjvosPc3Nzv01PT8fGj7/8VVW3TUTKNE3jqNnQKIqiISIPipk9Ei0TkY67b636YENgleYdwHlSFMUXsUk3RHl9kQ/+Ac6Cfk5kxG0fAAAAAElFTkSuQmCC"},dfb4:function(t,e,i){t.exports=i.p+"img/ellipsoid.0986f58b.svg"},e25d:function(t,e,i){t.exports=i.p+"img/rel.0986f58b.svg"},e2b9:function(t,e,i){"use strict";i("9568")},f44a:function(t,e,i){}}]);
//# sourceMappingURL=chunk-2f0b2f47.1725872215737.js.map