(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea482498"],{"09f3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAy1JREFUWEfNlz1oVUEQhb8BS0GxshASwULBwtQqUbDQSgMKWmnQxlK0DylERDtLi2ghKhamECIqmKCIjSiooFj4U1koilhYCOs7l9nH3nt337sJCfFCCHlv78zZmTNnToxVfmyV8/N/Aggh7AGOJ9VZMLNri61WCOEE8Ek/ZqbfradVgRDCFPA5TeiAxoHrpUBpZI8xCiw4AF1GAFrv1wDERGY23YTqQcl9l0neOuexR5uVbAKYGpQghDBjZpODWhFC+Ghmm3UmhKCE/dL7JWpVaAKoJQghPAE2AbNmdmYYACUUd3QJv/FN4E8CSNyqVaEFAJiOqEMIH4AtwM/eiyLhoRisVAW/pXp/F1jv744pZgowvp/jQB+hs/gKsBb4ATwws6NDWnAH2JckP29ml70lIni5BckhlbKqhKN+AWwA3vnnt3IgGme/AsfMbN7jqvzjTY5lhcj7J7R6RKK3wFlgI6CAr8SJBvsF+qG37BfwDHiukXZNmc8RvLMS+u0ei0TeVwHTLfUjnois8bsJ3TyOnkB3FqIh/VWC186J3NFvvWodiWXvopydKxCD+Wju8puvAe5pOpx0ktxKA7o+SwEw0+OFNF5l3esEi5/dN7MDXZPr3FIAnAMuNQBo9A5rSsxs20oDmOuxez+gfj8FvvfYvxPYqr/NbPeKAUjkVeNYIuHFKDxdgAxsgSesdrmPYZxzSfNfJ6DASCm3OxFngdtmlhWrJqiSEIlkEiKt5REPfMoTKXk15xkhijohxXwD/HZtiF6g9k6WhK7/ksxq7XoV4mKRwh0szXlDrL4Aj8zspH+uC7WcVc4Rpftc+h2T6zYi3elBriiEII2QNqyLWzTKds7UNLdhf5/77V/2vMAODzTh5ZTbKfpDT/IeuOotU/knk6VU8xzD1rF6qp1+Q8wu2aoGF6oE3soLUkwzG0uUtOa6sqa0ZMvkiFLDkhuz9EzTkkXVTG1dyRWLLDmWC/0wT6gJGikY25YnKI1h9AKyVuKFRlFOaWDytMwFa68LVPsjPkUh8n7rnAAU93lJ7eI4+/ciYu1/jaEAusjocpxZ9DZcjqSdWrDciUrx/gExCKIwfzWhJwAAAABJRU5ErkJggg=="},"2c49":function(t,e,s){"use strict";s("fc95")},3272:function(t,e,s){"use strict";e["a"]={DJI_M210V2:{value:"经纬 M210 V2",label:"经纬 M210 V2"},DJI_M300RTK:{value:"经纬 M300 RTK",label:"经纬 M300 RTK"},DJI_M30:{value:"经纬 M30",label:" 经纬 M30"},DJI_Mavic2_hangye:{value:"御 Mavic 2 行业版",label:" 御 Mavic 2 行业版"},DJI_Mavic2_bianjiao:{value:"御Mavic 2变焦版",label:"御Mavic 2变焦版"},DJI_Phantom4Pro:{value:"精灵 Phantom 4 Pro",label:"精灵 Phantom 4 Pro"},DJI_Mavic2_hangyejinjie:{value:"御 2 行业进阶版",label:"御 2 行业进阶版"},DJI_AIR_2S:{value:"DJI AIR 2S",label:"DJI AIR 2S"},DH_X820:{value:"大华 X820",label:"大华 X820"},DH_X1550:{value:"大华 X1550",label:"大华 X1550"},DJI_MAVICE3_E:{value:"DJI_MAVICE3_E",label:"Mavic 3E"},DJI_MAVICE3_T:{value:"DJI_MAVICE3_T",label:"Mavic 3T"}}},"328a":function(t,e,s){"use strict";s("c50e")},"3f33":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAmNJREFUWEe9V0tOAzEMtTdcA1j0HLCgx+An9RiAxOcYSJRyDFhQcQwWtNdgY3hRMnIcZ2ZKUyIhwRAnz8/PnzBtsERkn4hOieiIiA6ICH+v4xGr+PsLMy/HHstDG9WlN0N71f8B6pmIACYBdM17AYjIFRH1XYzDwUJtBSDM/FDb4AKIXj9GqrWt61ncj30ITQqRtTvx2CgAxMM+DWLEdDZEZ7KJZ1wT0ZkJSwEiAxAN3wyt001EpYGLCBh57QNhAWAzjLBAN7werWgvzo5Ta2aepL0dAEdwnecigpTDT7eY+d14W93jhHXBzDPYawDf6sCMdhH5MgDmv3q4NACeiOhCfVsx86HShQ4H2A16CABEBIpPgunQKeOtAcR7dIjDPQlA1fto2AoAakbKsKAFFhF4DgawCu9bAnBYmAKAph+qX1g1t9CACmfusIjouEy8YuMAQAag1ut1TkTHNREqADoMSzCAmIR6zsx7lVy2GvC22W9ZFlQArAGgE+B/AIg6SHdmALIKZXK8GQMGAP01BNDAraOBaiEyDmUMaBG6jadxFhQi1EPHnTc8NAZQpKGu0Utmnu64DuSMm07ltuBWDNiuiKzzmlHBQkMA1WakhYEI7Lod445QdfU8oMXR9euYtzq98AlVzg4kKMN2aJlHe+tgJ3YNAJv0JJyBGFN7K2Uc5+o5Mwvx0FA6ONf3AfOGUj0Phv7jpJxFHOYEIrpvMJYXQ27fw8SO52AD7z9MyR96WlYPk/QoSZN18s+tLy4Dpm3iwG2eZjjOra7pnp0+TvvehKMBGEaQZmAFOvGe50V4hrLnBysA0slAWjSXAAAAAElFTkSuQmCC"},"415f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAydJREFUSEutll1IVFEQx3+zholpZWVRpBCFRoUWbvRl5EMUFX1AWFQ+RPVaBGlQL/nUx65Fj0IJIVqkBFFBRAWRfYtQvWS2mmlBYSLqBqntnbh73Vz1Xu+uduC+nJn//z8z98w5I7gtVeEi64FtCOtQFqGkhWFCF0IAgxcI9zhBHSI6FqU4GkvVQyoHUU4Bi9ziGrQHEM7RyzVKxbDD2Av6dQHCTWBljEIj3epR9lIin0caRgv6tQCoRZg1TjELpvxE2E2xPI3mGS7o000IdxESJyQWASv9CDsolgeRrSHBy5rNAPUIqf9FbIgkyCS8HJeP1jkDCms0obaNlxP4Z24x1hdmsqZ2j4SsDC/qIZQKN5Rp96bCHwPe/orFO8pHOUKJVAhWnzXFcvT3Z8D5zfCsFYoege25d44jwAmyBJ9uwMMTt3j3Z0J1oeVV/RaKHrshbOwGBUKZXgBOjgWPFmv4Cl6zQ8e3fIJf6xDynfDRYq/bYXXN+JQGe7POzPA7MMeO5kAmVA2W8U07bL0FnSFI80B6IjT9hqkeSJsEwZBly0qy9h3WDzPDPrtGXz0NXh6xYIaCKTgjGb73gkcgYzp86QIRmJkMvX1gGND9G44+hECfjaTS7yh4fSPsyx0OMoVVIcEztG/umQGEDGt/IAQ55dBol2VY0KGkS5OhZjcsmW2R33gHHzqsL30KJCZY/Rjsg5TJMC0JWrsg2A93foxdUsdDsywZKnfCinnQ2AGXnsOV5okeGr/6EEqcaPJSoXwreOdDWzecewLXW6Anzq4f5PfF1Phmeat2wvJ58K0HzjyGipZxZBpu/BivtpwpVnlz58KnTsi6FrdggCDZ1uXt18MIV90ozIv72EqofA+Pfrp5j7D/u7wjz9MXXiF43WgSBfrHHJNsGRoKM1k19DyZPmW6GKgHUtxE47QHw+9ssTSauOEjRpluQbn9n0eMXRTL/UiQo4coUxTMK3qimZqZ7YkWG51hJAyrvFVAXpzli7g3AEWRMkZzuA/CBqcRFsYkrDTj4Wz8g3A0uzmBp5CPsh1hLbBw2KgPzWh41L9LkGdOE3eE8i/alBPoBY2WZwAAAABJRU5ErkJggg=="},4382:function(t,e,s){var a={"./RFbase.png":"e796","./computer.png":"be14","./controller.png":"fc1b","./default.png":"6bec","./gb.png":"72c2","./generations/4g.png":"6edf","./generations/5g.png":"5d1f","./status/1.png":"415f","./status/2.png":"8467","./status/3.png":"788c","./status/4.png":"54fc"};function i(t){var e=l(t);return s(e)}function l(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=l,t.exports=i,i.id="4382"},"4f0c6":function(t,e,s){},"54fc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAxxJREFUSEutlltsDGEUx3/fbuMFQSLpS1+EqDcPrO2FuDygqTYVqRIk1TauSStCq6jdCqqNW4NWpWWxbYImiEsjLhWLFRvvSEUiJIjESwXV3U9mxu7MtjM70zJv35xz/v9zznfO+Y7A5pMg8DAPN/kIcoFpSCapZoJvQB8xnhHjFhFCAmQqSGEllH5c9FCKi1qVxNmnkDeQR0D4iZmZmBLKOUzBzWXA44xnmFaEKCXiBe+GSoYRyiwWAFcRTB4lmWYm+UqUFSLCYyNOEqH0shjBTQRj/oksbiwZQFAowtyN/0oQylwyiRJBMP6/kOkg/biYLZ7yWqszJfpi3Hwg/A93ZudjhAyyxVWiGqGXMlx0mFoVl8GEdGhvSA26aiN8eQ8Pe8z1XFSIp3QItc+yeWNa+iUboKpNA+jcD6d95mA7T8DyKk22Zyn0Jq7MqN9HmOlCzmM+gzwyRTrYBQtX66Luo3BsR7Jq7Wko2KL/O7MNLjabO5bGAiGzaERQbZmv1gcwc5EuvnESGiu1s68dlpTrsltn4NBm69RLmhTCEIK5KS9oKGlLJbjTYOMx3exBEOrW2RVPSMhsPgHpdpo03wFPnrna3XNQb4jUGuyzEuEvx41uLI44aKAOzh6w9VdVkAyMjLCsGioak8Ev+aB1/wgInaa0tgUKLAri/gXYV+qEVE2pfdH4z8NiA2CwHsZO1HtPoQp1Q02xHWlISC9NuNhpqbm7FZZt0sW9XbBnjXZu7gHPUueVqrZFqsavOgwlNTrgw07YuzbZt6GkQT+01Kdo/FSjbdcpKNyqGd8LgG+9OdCRa5BTpMnatsOF42Z6fSwhUxveuZQTo90UbVMd/PwOAUOTmymW74LfP6zHWnx4q4TK8/SR50hm2936KOUvycCbeJ5U0mxmABFg3ChBrcz6lXdWhHmlKCSvGFkos+u648lj55myYkCReE7ikTRbovIQXPkPkfYjWWkkGxZh3OG/6Q0Cs+yCsJC/BNbG02jUcbII7wamOiR+S4xDI16EjeDqBn6buaRRAOSo5Mmr/lvgGYPcJJ8nVht3HPMPzdHvqANCsa8AAAAASUVORK5CYII="},"5bac":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"container--inner"},[e("div",{staticClass:"container-header"},[e("PointTitle",{attrs:{name:"操控中心"}}),e("div",{staticClass:"tab-btns"},[e("el-button-group",t._l(2,(function(s){return e("el-button",{key:s,attrs:{type:t.tabIndex===s?"primary":"",size:"mini"},on:{click:function(e){t.tabIndex=s}}},[t._v(" "+t._s(1===s?"图文":"列表")+" ")])})),1)],1),e("div",{staticClass:"filter-name"},[e("el-input",{attrs:{clearable:"",placeholder:"输入站点名称进行检索"},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1)],1),e("div",{staticClass:"container-body x-scroll-white"},[e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex === 1"}],staticClass:"tab-box"},[e("SiteCard",{attrs:{list:t.siteDataView},on:{showSiteAddress:t.showSiteAddress,showMore:t.showMore}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tabIndex,expression:"tabIndex === 2"}],staticClass:"tab-box"},[e("SiteTable",{attrs:{list:t.siteDataView,pagination:t.pagination}})],1)]),e("el-dialog",{attrs:{"custom-class":"map-dialog",visible:t.mapDialogVisible,"destroy-on-close":!0},on:{opened:function(e){return t.mapDialogOpened()},close:function(e){t.mapDialogVisible=!1}}},[e("el-title",{attrs:{slot:"title"},slot:"title"},[t._v(" 地图定位 ")]),e("OLMap",{ref:"OpenLayerMap"})],1),e("el-dialog",{staticClass:"protective-line",attrs:{center:"","custom-class":"more-info-dialog",width:"780px",visible:t.moreDialogVisible,"destroy-on-close":!0},on:{close:function(e){t.moreDialogVisible=!1}}},[e("el-title",{attrs:{slot:"title"},slot:"title"},[t._v(" 更多信息 ")]),t.currSite?e("MoreInfo",{attrs:{"curr-site":t.currSite}}):t._e()],1)],1)])},i=[],l=s("2f62"),n=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-list"},[t.list.length?t._l(t.list,(function(a){return e("div",{key:a.siteID,staticClass:"card-box"},[e("div",{staticClass:"img-box"},[e("div",{staticClass:"main-device"},[e("img",{attrs:{src:t._f("siteImg")(a),alt:""}})]),a&&(t.SITE_IS_HIVE_TYPE.includes(a.siteMode)||a.siteMode===t.SITE_HIVE_TYPE.SITEMODE.grandHub)?e("div",{staticClass:"uav-device"},[e("img",{attrs:{src:t._f("uavImg")(a),alt:""}})]):t._e(),e("div",{staticClass:"computer-device"},[e("img",{attrs:{src:t._f("computerImg")(a.siteMode),alt:""}})])]),e("div",{staticClass:"info-box"},[e("div",{staticClass:"info-inner"},[e("div",{staticClass:"title"},[e("el-tooltip",{attrs:{content:a.siteName,placement:"top",effect:"light"}},[e("h4",[t._v(" "+t._s(a.siteName)+" ")])]),e("div",{staticClass:"tag",style:{backgroundColor:t.colorNameFilter(a.subState)}},[e("img",{attrs:{src:s("09f3")}}),e("div",[t._v(t._s(t._f("stateInterpret")(a.subState)))])]),t.SITE_IS_HIVE_TYPE.includes(a.siteMode)?e("div",{staticClass:"tag",style:{backgroundColor:t.flowStateColorFilter(a.flowState)}},[e("img",{attrs:{src:s("3f33")}}),e("div",[t._v(t._s(t._f("flowStateFilter")(a.flowState))+" ")])]):t._e(),e("a",{staticClass:"more-link",on:{click:function(e){return t.showMore(a)}}},[e("span",[t._v("更多")]),e("i",{staticClass:"el-icon-arrow-right"})])],1),e("span",[t._v("设备："+t._s(t._f("interpretSiteModel")(a.siteMode)))]),e("div",{class:["small",{"flex-wrap":4===a.siteMode}]},[e("span",[t._v("最后更新时间："+t._s(t.updateTime(a)))]),e("span",[t._v("ID："+t._s(a.siteID))])]),e("div",{staticClass:"status-box"},[t.SITE_IS_HIVE_TYPE.includes(a.siteMode)?e("div",{staticClass:"status-item"},[e("span",[t._v("机库")]),e("span",{class:["status-tag",{online:a.hiveState}]})]):t._e(),e("div",{staticClass:"status-item"},[e("span",[t._v("无人机")]),e("span",{class:["status-tag",{online:a.uavState}]})]),a.isComputer?e("div",{staticClass:"status-item"},[e("span",[t._v("机载计算机")]),e("span",{class:["status-tag",{online:a.osdkState}]})]):t._e()]),t.SITE_IS_HIVE_TYPE.includes(a.siteMode)?e("div",{staticClass:"status-box"},[e("div",{staticClass:"status-item"},[e("span",[t._v("天气: "+t._s(-1===a.isRaining?"未知":a.isRaining?"有雨":"无雨"))])]),e("div",{staticClass:"status-item"},[e("span",[t._v("风速: "+t._s(a.windSpeed&&a.windSpeed.toFixed(1)||0)+" m/s")])])]):t._e(),a.siteAddress?e("a",{staticClass:"location-link",on:{click:function(e){return t.showSiteAddress(a)}}},[e("img",{attrs:{src:s("afe7"),alt:"icon"}}),e("span",[t._v("站点地址："+t._s(a.siteAddress?a.siteAddress:"未知"))]),e("i",{staticClass:"el-icon-arrow-right"})]):t._e(),e("div",{staticClass:"btns-box"},[e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"control/control/controlCenter",expression:"'control/control/controlCenter'"}],attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.gotoHandle(a.siteID)}}},[t._v(" 操作中心 ")]),t.SITE_IS_HIVE_TYPE.includes(a.siteMode)?e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"control/control/plan",expression:"'control/control/plan'"}],staticClass:"is-plain",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$router.push({path:"/timer",query:{siteID:a.siteID}})}}},[t._v(" 计划任务 ")]):t._e()],1)])])])})):e("NoResult",{staticStyle:{flex:"1"}})],2)}),o=[],r=s("c1df"),c=s.n(r),u=s("1165"),d=s("16d5"),v=(s("9c23"),s("ed08"),s("3272"),s("b7c3"));s("e516");s("fc1b"),s("be14");const A=s("72c2"),p=(s("e796"),s("6bec"));var g={name:"ControlSiteCard",components:{NoResult:d["a"]},filters:{interpretSiteModel:u["e"],stateInterpret:u["i"],flowStateFilter:u["c"],siteImg(t){const{siteMode:e}=t;var s,a,i,l;return v["h"].includes(e)?(null===t||void 0===t||null===(s=t.hiveinfo)||void 0===s?void 0:s.hiveModelBkgURL)||p:e===v["g"].SITEMODE.radioFrequencyBox?(null===t||void 0===t||null===(a=t.UAVInfo)||void 0===a?void 0:a.modelBkgURL)||"":e===v["g"].SITEMODE.grandHub?A:e===v["g"].SITEMODE.uavController?(null===t||void 0===t||null===(i=t.UAVInfo)||void 0===i?void 0:i.modelBkgURL)||"":e===v["g"].SITEMODE.onboard?(null===t||void 0===t||null===(l=t.UAVInfo)||void 0===l?void 0:l.modelBkgURL)||"":void 0},uavImg(t){var e;return(null===(e=t.UAVInfo)||void 0===e?void 0:e.modelBkgURL)||""},computerImg(t){const e={[v["g"].SITEMODE.hiveAndRadioFrequencyBox]:"RFbase",[v["g"].SITEMODE.radioFrequencyBox]:"RFbase",[v["g"].SITEMODE.grandHub]:"",[v["g"].SITEMODE.uavController]:"controller",[v["g"].SITEMODE.onboard]:"computer",[v["g"].SITEMODE.hive]:""},a=e[t]?s("4382")(`./${e[t]}.png`):"";return a}},props:{list:{type:Array,default(){return[]}}},data(){return{map:null,SITE_HIVE_TYPE:v["g"],SITE_IS_HIVE_TYPE:v["h"],siteLocationMap:null,currentPage:1,totalNum:0,pageSize:13,dialogVisible:!1,mapDialogVisible:!1,SchedulingDialogVisible:!1,expand:{uavState:0,osdkState:0,subState:0,droneUpdate:0,hiveState:0,weather:0,windSpeed:0,isRaining:-1,hiveUpdate:0},siteData:[],siteDetail:{},randomHash:"*sda",tabIndex:2,pagination:{size:10,page:1,total:0}}},computed:{UAVModels(){return this.$store.state.device.UAVModels||{}},hiveModels(){return this.$store.state.device.hiveModels||{}}},mounted(){},beforeMount(){},methods:{colorNameFilter:u["a"],flowStateColorFilter:u["b"],isDJIAirPort(t){var e;return v["a"].includes(null===t||void 0===t||null===(e=t.hiveinfo)||void 0===e?void 0:e.hiveModel)},gotoHandle(t){this.$router.push({path:"/center",query:{siteID:t}})},updateTime(t){const e=t.updateTime?t.updateTime:t.createTime;return c()(e).format("YYYY-MM-DD HH:mm:ss")},showSiteAddress(t){this.$emit("showSiteAddress",t)},showMore(t){this.$emit("showMore",t)}}},h=g,S=(s("328a"),s("2877")),C=Object(S["a"])(h,n,o,!1,null,"4dd2b33d",null),b=C.exports,f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"site-table"},[e("el-table",{attrs:{data:t.list,"header-cell-class-name":"x-table-header-cell white-theme","row-class-name":({rowIndex:t})=>t%2===0?"even-number":"uneven-number",size:"mini",height:"100%"}},[e("el-table-column",{attrs:{"header-align":"center",align:"center",type:"index",label:"序号",width:"60"}}),e("el-table-column",{attrs:{"header-align":"center",align:"center",label:"名称",prop:"siteName"}}),e("el-table-column",{attrs:{"header-align":"center",align:"center",label:"工作状态",prop:"subState"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"status"},[e("div",{staticClass:"title"},[e("div",{staticClass:"tag",style:{backgroundColor:t.colorNameFilter(a.row.subState)}},[e("img",{attrs:{src:s("09f3")}}),e("div",[t._v(t._s(t._f("stateInterpret")(a.row.subState)))])]),t.SITE_IS_HIVE_TYPE.includes(a.row.siteMode)?e("div",{staticClass:"tag",style:{backgroundColor:t.flowStateColorFilter(a.row.flowState)}},[e("img",{attrs:{src:s("3f33")}}),e("div",[t._v(t._s(t._f("flowStateFilter")(a.row.flowState))+" ")])]):t._e()])])]}}])}),e("el-table-column",{attrs:{"header-align":"center",align:"center",label:"设备配置",prop:"devices"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("interpretSiteModel")(e.row.siteMode))+" ")]}}])}),e("el-table-column",{attrs:{"header-align":"center",width:"300px",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btns-box"},[e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"control/control/controlCenter",expression:"'control/control/controlCenter'"}],attrs:{type:"text"},on:{click:function(e){return t.gotoHandle(s.row.siteID)}}},[t._v(" 操作中心 "),e("i",{staticClass:"el-icon-s-operation"})]),t.SITE_IS_HIVE_TYPE.includes(s.row.siteMode)?e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"control/control/plan",expression:"'control/control/plan'"}],attrs:{type:"text"},on:{click:function(e){return t.$router.push({path:"/timer",query:{siteID:s.row.siteID}})}}},[t._v(" 计划任务 "),e("i",{staticClass:"el-icon-date"})]):t._e()],1)]}}])})],1),e("el-pagination",{staticClass:"x-pagination",attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":t.pagination.size,total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1)},m=[],I={name:"ControlSiteTable",components:{},filters:{interpretSiteModel:u["e"],stateInterpret:u["i"],flowStateFilter:u["c"]},props:{list:{type:Array,default(){return[]}},pagination:{type:Object,default(){return{}}}},data(){return{SITE_IS_HIVE_TYPE:v["h"]}},computed:{},beforeMount(){},mounted(){},methods:{flowStateColorFilter:u["b"],colorNameFilter:u["a"],handleCurrentChange(t){console.log("当前页: "+t)},gotoHandle(t){this.$router.push({path:"/center",query:{siteID:t}})}}},E=I,_=(s("9a0e"),Object(S["a"])(E,f,m,!1,null,"3ecdfe3e",null)),M=_.exports,w=function(){var t,e,s,a,i,l=this,n=l._self._c;return n("div",{staticClass:"info-box"},[n("h5",{staticClass:"floor-title"},[l._v(" 基本信息 ")]),n("div",{staticClass:"flex-box"},[n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("站点ID")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteID))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("站点名称")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteName))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label",staticStyle:{width:"113px"}},[l._v("站点模式")]),n("span",{staticClass:"val"},[l._v(l._s(l._f("interpretSiteModel")(l.currSite.siteMode)))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("飞行模式")]),n("span",{staticClass:"val"},[l._v(l._s(l._f("interpretSFMode")(l.currSite.siteSFMode)))])]),l.currSite.isSiteType?[n("div",{staticClass:"group basis-6"},[n("span",{staticClass:"label"},[l._v("站点地址")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteAddress))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("相对地面高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteAltitude))])]),n("div",{staticClass:"group basis-6"},[n("span",{staticClass:"label"},[l._v("地理位置")]),n("span",{staticClass:"val"},[l._v(l._s(l._f("interpretLocation")(l.currSite.siteLocation[0]))+", "+l._s(l._f("interpretLocation")(l.currSite.siteLocation[1])))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("安全位置")]),n("span",{staticClass:"val"},[l._v(l._s(l._f("interpretLocation")(l.currSite.siteSafeLocation[0]))+", "+l._s(l._f("interpretLocation")(l.currSite.siteSafeLocation[1])))])]),n("div",{staticClass:"group basis-6"},[n("span",{staticClass:"label"},[l._v("备降位置")]),n("span",{staticClass:"val"},[l._v(l._s(l._f("interpretLocation")(l.currSite.siteOptionLocation[0]))+", "+l._s(l._f("interpretLocation")(l.currSite.siteOptionLocation[1])))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("海拔高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteHAltitude))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("椭球高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteEllipsAltitude))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label",staticStyle:{width:"113px"}},[l._v("起飞点返航高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteRHAltitude))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("返航朝向")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteRHHeading))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("返航悬停高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteRHHoverAltitude))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label",staticStyle:{width:"113px"}},[l._v("备降海拔高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteOptionAltitude))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("备降悬停海拔高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteOptionHoverAltitude))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label",staticStyle:{width:"113px"}},[l._v("备降点椭球高度")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteOptionEllipsAltitude))])])]:l._e()],2),n("h5",{staticClass:"floor-title"},[l._v(" 实时视角配置 ")]),n("div",{staticClass:"flex-box"},[n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("播流配置")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.videoPullAddr||"-"))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("推流配置")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.videoPushAddr||"-"))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label",staticStyle:{width:"113px"}},[l._v("播流FLV地址")]),n("span",{staticClass:"val"},[l._v(l._s(l.currSite.siteFLVURL||"-"))])])]),l.uavInfo?n("div",{staticClass:"group-box"},[n("div",{staticClass:"group-title"},[n("h5",[l._v(" 无人机信息 ")]),(null===(t=l.currSite)||void 0===t||null===(t=t.UAVInfos)||void 0===t?void 0:t.length)>1?n("el-select",{model:{value:l.currUavIndex,callback:function(t){l.currUavIndex=t},expression:"currUavIndex"}},l._l(null===(e=l.currSite)||void 0===e?void 0:e.UAVInfos,(function(t,e){return n("el-option",{key:t.UAVID,attrs:{value:e,label:t.UAVName}})})),1):l._e()],1),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("无人机编号")]),n("span",{staticClass:"val"},[l._v(l._s(l.uavInfo.UAVID))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("无人机名称")]),n("span",{staticClass:"val"},[l._v(l._s(l.uavInfo.UAVName))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("无人机型号")]),n("span",{staticClass:"val"},[l._v(l._s(l.uavInfo.model))])])]):l._e(),l.SITE_IS_HIVE_TYPE.includes(null===(s=l.currSite)||void 0===s?void 0:s.siteMode)?n("div",{staticClass:"group-box"},[n("div",{staticClass:"group-title"},[n("h5",[l._v(" 机库信息 ")]),(null===(a=l.currSite)||void 0===a||null===(a=a.hiveinfos)||void 0===a?void 0:a.length)>1?n("el-select",{model:{value:l.currHiveIndex,callback:function(t){l.currHiveIndex=t},expression:"currHiveIndex"}},l._l(null===(i=l.currSite)||void 0===i?void 0:i.hiveinfos,(function(t,e){return n("el-option",{key:t.hiveID,attrs:{value:e,label:t.hiveName}})})),1):l._e()],1),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label",staticStyle:{"padding-right":"15px"}},[l._v("机库ID")]),n("span",{staticClass:"val"},[l._v(l._s(l.hiveInfo.hiveID))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("机库名称")]),n("span",{staticClass:"val"},[l._v(l._s(l.hiveInfo.hiveName))])]),n("div",{staticClass:"group basis-3"},[n("span",{staticClass:"label"},[l._v("机库型号")]),n("span",{staticClass:"val"},[l._v(l._s(l.hiveInfo.hiveModel))])]),n("div",{staticClass:"group"},[n("span",{staticClass:"label"},[l._v("机库类型")]),n("span",{staticClass:"val"},[l._v(l._s(l._f("interpretHiveType")(l.hiveInfo.hiveType)))])])]):l._e()])},D=[],x={name:"",components:{},filters:{interpretSiteModel:u["e"],interpretSFMode(t){return 1===t?"孤岛模式":"跳棋模式"},interpretHiveType(t){return 1===t?"固定机库":2===t?"移动机库":""},interpretLocation(t){const e=t.toString();let s=0;return e.indexOf(".")>0&&(s=e.split(".")[1].length),t?s>6?t.toFixed(6):t:0}},props:{currSite:{type:Object,default(){return{}}}},data(){return{SITE_IS_HIVE_TYPE:v["h"],currUavIndex:0,currHiveIndex:0}},computed:{uavInfo(){return this.currSite.UAVInfos[this.currUavIndex]},hiveInfo(){return this.currSite.hiveinfos[this.currHiveIndex]}},watch:{"currSite.siteID":function(){this.currUavIndex=0,this.currHiveIndex=0}},mounted(){},methods:{}},y=x,F=(s("7832"),Object(S["a"])(y,w,D,!1,null,"26955046",null)),T=F.exports,U=s("29b2"),k=s("22e6");const V=null,O=null;let B=null;var R={name:"Control",components:{OLMap:k["a"],SiteCard:b,SiteTable:M,MoreInfo:T},data(){return{filterName:"",currSite:null,siteLocationMap:null,currentPage:1,totalNum:0,pageSize:13,socketInstance:V,dialogVisible:!1,mapDialogVisible:!1,SchedulingDialogVisible:!1,expand:{uavState:0,osdkState:0,subState:0,droneUpdate:0,hiveState:0,windSpeed:0,isRaining:-1,hiveUpdate:0},siteData:[],siteDetail:{},randomHash:"*sda",tabIndex:1,pagination:{size:1e4,page:1,total:0},heartBeatingTimer:O,moreDialogVisible:!1}},computed:{siteDataView(){return this.siteData.filter(t=>t.siteName.includes(this.filterName))}},watch:{siteData(t){t.length&&this.unlockSocket()}},created(){this.loadData()},mounted(){this.socketInstance=U["a"].initSocket()},beforeDestroy(){B=null,this.socketInstance&&null!==this.socketInstance&&(U["a"].clearSocket(),this.socketInstance=null)},beforeMount(){},methods:{...Object(l["b"])({getSiteGroup:"site/getSiteList"}),loadData(){const t={page:this.pagination.page,size:this.pagination.size,isSiteType:-1};this.getSiteGroup(t).then(t=>{const{code:e=0,data:{list:s=[],total:a=0},reason:i=""}=t;if(!this.statusInclude(e))return this.$message.warn(i);this.siteData=s.map(t=>Object.assign(t,this.expand)),this.pagination.total=a})},unlockSocket(){this.siteData.forEach(t=>{this.socketInstance.on(t.siteID+" state",e=>{const{type:s,UAVID:a,hiveID:i}=e;if(1===s){const s=null!==t&&void 0!==t&&t.UAVInfos?t.UAVInfos:[t.UAVInfo||{}];if(null===s||void 0===s||!s.length||!s.find(t=>t.UAVID===a))return;Object.assign(t,{uavState:e.isUAVOnline?1:0,osdkState:e.isSCOnline,subState:e.subState,droneUpdate:(new Date).getTime()+5e3})}else if(2===s){const s=null!==t&&void 0!==t&&t.hiveinfos?t.hiveinfos:[t.hiveinfo||{}];if(null===s||void 0===s||!s.length||!s.find(t=>t.hiveID===i))return;Object.assign(t,{hiveState:1,flowState:e.flowState,windSpeed:e.windSpeed,isRaining:e.isRaining,hiveUpdate:(new Date).getTime()+5e3})}}),this.heartBeating(t)})},heartBeating(t){this.heartBeatingTimer=setInterval(()=>{const e=(new Date).getTime(),{droneUpdate:s,hiveUpdate:a}=t;s||a?s&&s<e?Object.assign(t,{uavState:0,osdkState:0,subState:0}):a&&a<e&&Object.assign(t,{hiveState:0}):Object.assign(t,{uavState:0,osdkState:0,subState:0,hiveState:0})},3e4)},showSiteAddress(t){this.mapDialogVisible=!0,this.reBuildSite(t)},showMore(t){this.moreDialogVisible=!0,this.reBuildSite(t)},reBuildSite(t){this.currSite=t;let e=null!==t&&void 0!==t&&t.UAVInfos?t.UAVInfos:[t.UAVInfo||{}],s=null!==t&&void 0!==t&&t.hiveinfos?t.hiveinfos:[t.hiveinfo||{}];0===e.length&&(e=[{}]),0===s.length&&(s=[{}]),this.currSite.hiveinfos=s,this.currSite.UAVInfos=e},mapDialogOpened(){B=this.$refs.OpenLayerMap,this.mapAddMarker()},mapAddMarker(){var t;let e=null===(t=this.currSite)||void 0===t||null===(t=t.hiveinfo)||void 0===t?void 0:t.hiveModel;e=e||null,B&&B.addHiveMarker(this.currSite.siteModel,e,this.currSite.siteLocation[0],this.currSite.siteLocation[1],!0)}}},N=R,K=(s("ea23"),s("2c49"),Object(S["a"])(N,a,i,!1,null,"1f2ce550",null));e["default"]=K.exports},"5d1f":function(t,e,s){t.exports=s.p+"img/5g.7978ac3a.png"},"6edf":function(t,e,s){t.exports=s.p+"img/4g.867f890d.png"},7832:function(t,e,s){"use strict";s("4f0c6")},"788c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAslJREFUSEullk1IVFEUx39nLMnIIDAqiCCcGunDFmqWabopKEmkMSMIkowWQbuMEkrbFErLWgQZFRE0o1IZhRuxRioZy7AMy7Eogj4oJHDTkHPjfYyN4zjvvrrLd8///M49755zj+CwlELopAyoRLEFwYtikSkTxlFEgMcI99hNSASVzqXMtqma8ZBPHTFOAl6nwOz9CB7OMcRVaSaWSpMSqO6ykii3gCJNULJZmEz2ShXvkzdmAFWQCjwEUeT8I8ySCd8Bv/h5lOhnGlAF2Y7QBWT+F+yvOApUSQ3d8U9TQBXAh4cwkO0IyzsGc7JhuIn0V8T0NEGMQqnljXVwQAXIwMMTrX/mPQwbLlkxvbsAg0cd4wPCxNgstUxawE4OEqNNR0nxTVi+zzL9EYLerVoyhEPip03MOuvgrfbVX3cGfKctyIcrMFCvB4QIflaLClCOh15dFauOQP5Fy3y0BYZOaEuJUSGqgxYUx7VVK2qgKGiZDzfAyHltKUKrAQyhKNVWLSuDEru0XtTB2DVtKRAygF9QLNFW5XihfNQy76+ET/e1pQhfRbXzy1WhLwS22f05VADfnusDIeoemAXstIE9i2Hc6GDaK+o+pRlAtQ3sFqOP6C8zpW4vjeHebwPvCPzW51mXpp1WoMGVLMcHc5fC54euZFZZuC18d4jp1mbhu21t84GNfZAxDwYK4ad2BBFe4bOadwf1KC5rSROb93g/9GzSkk01bxNoPU9PgUJH9domyGu2zD5eh/ABRwnCMyYpnnqeTGg7eea7BQscPaxpBE8WvD5F6lFpmgejcIqkhhHja/KIsQPhtqvOkz66KIpq2cODuFmqIcqABrROmh42gaI2ETbjhHG9mV7hBooCx/SmMjD+mWJ/PI2JJs6DsKIRRa4WWBhDOOt6EE50bk7g6ylFsQsoQchNGvXH7FG/i5f0zTZxx33+AelS3iEfYea2AAAAAElFTkSuQmCC"},"7ffa":function(t,e,s){},8467:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAA4NJREFUSEutlmlIFGEYx//P7FZmF1aUblqJdohldohlq9unThTbzUqKkA6CCjvAqKSS6EDrQ0FEdEhFH8qtpUOoIDrczSKxIKVUFDvQNdMurFSceWLGdnVd15na5tu8z//5/9553mMegtrDIHNRSCIEWgLQXACRAAV1pvEXANVEXMwiF9qSnHYQuC9L8hXMYQhlDkMGM+0GyRANDyvwI1ON9RdyCFJvGb0C0x6PDhdJfxWEOA0YbwmjRMcdK6ymj7U9g17AVHvoPAFsBTDyn2BdSU2QJIvN5Czq7uMBTH0SNl+Q+DbA/f2E/UmndpEp5WbSh3suPzcwzWGYJLJQAvCQ/wNzu7ToiGdZjfWV8ogCTCtI04nBxU//ec3UZiivaUPCHOtyq6gALXbDWgadV8vzK0683masPy+fGjLbx1Rp3voaqRnhh3ChNrtLzai2JdZNpKVFoSYifqTRR1VG0OPItFuYMCQGFkeoh56Z5pHZbsgFaKeqkwZBoH44DkwtQPigyXjYeBMnqzb3yOI8uZx2AEYNfn1KDAOjkB2dj+CAMDxvfoDcN2u89ASyy8AGAKP9AUYNNWHflHz0Fwag/FsJ9pct9WX3kcz20DZ/DnrciBTsijqlAOp+1WJrqQnc+zUqn8L2PoGrxu9DWGAkjlduQav43WvWC0M2YkPEXmX8c3sjtr9YgJaOT30USwH6Lml+fBmG9QtCU5sTJ6qy8Ppb12ZOH7cXy8I2Kuat4k9kvpiP5ra3aisjl9T3phk/aDpyY23QUz/F6GLtUTxsvIL0cVlYELzSbb7jZTLe/XipBoOyaSwOQx4zZflSRwyOR17sdXe4TWrFACHA/Z5TnoGyr/dVYZ0CztN08GcELUZ29Bkv02MV2/C06ZpGGKAcfK1XW9KoVdg6MddtfrbmIO46T2uGgVEdk1g3Sbm8zQ7DOjCdU8tebNiE9LGZKKy/hKvvD6vJPePuy9v1ewp58gygWX/nolUtlOqcs+Pdvyc5zVI8YjKLASUABmu10ahrIV1r3PWE5gpZ79FiLHMEL5JYf8Ofm6dHHdsF6ki9Zmy44xr3aqI6obqC//ClLQKJy7vDvL7QNYvO8gZeBqSZGsvWQyaUku7nalcZuwdVG2EJwh4CR2gBM6hGgHT4rxvh7uZyB/6qKMRIpE9mEhMAivBs9bmGWFfM3HE7Jsnp8NVxuzx/A04MSWVtJm/SAAAAAElFTkSuQmCC"},"9a0e":function(t,e,s){"use strict";s("7ffa")},afe7:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAAAXNSR0IArs4c6QAAAoxJREFUSEu9lk1IVFEUx3/nYVpkJSHULggjCtpEFH1SEAZ9UJugaFGBQYsUa96M5kZbhB/zHMPWQl+0Cvqy6AMqKwoKahOVYG1rEYUtAnGaE3eewzjOm3efOnRXc4f/Ob9zzjv33Cv8pyVWTkqXk6Ee2AasAqoBY/cH4SvK0JwMQ+MJeRfmqzTogi4hTSfKcWswvuA+0EJcPgTpg0FJPQH0AfMjQvIyhw5icm6qXTGoV/vI0DxtwGQDh9vE5MDkvwpBnppStc4KkjMW7uDK/vw298vTXSgPygLJO2kjLp1mm82orl+rRsb4MdFRZWUtUupGE/LFL11SW4CushLyNbuBKwdle7tWPKvmG1AbEfQbSAOLI+phnFohpev4y1urkX84m6liiJ+kqWYtZM/ZFqutw0nB00aU/lCxMEqaZbTKaJEuqR8nJkZpFw4DBnQJ5WgoyCFGTFKBmqTuBB5bAr1lQE9QdoQKK1jNafkUqOnTGtL8soCeGtBdlL2WOm8iLq8DNT26FMk2U1jpHhlQAqXbIhwgJg0lSncKuGgJ9IrQrStx+Byhc/YRk8ECXUrXkOENylxLoIdyB9beOf4cuQo8BDLABpRGwLEEOcZCFvigXt1NhnvWrGYmyM67/PT29BXKxpn5KmFlzp8rNX4xcsvcqON8LzNoK668LASZnadHUK6VBSZ04crZnK/iG9bT8yhts4JNufSKM8p59/Q6yuEZwYT3uGIGbsEq/QrydBBlz7RgwjCVrKdJzFUSEeR/M/vAzX+E53WV1I80yVhQcPYHZFI7gPbQzITLuHIsTGMH+ZmZh8tNYF6AswbiMmArcTSQ8dKjKxD6ETZnnSrDKGdIyAsbpHTXRbGcpuYfn5a6RSCWirMAAAAASUVORK5CYII="},c50e:function(t,e,s){},ea23:function(t,e,s){"use strict";s("f1c7")},f1c7:function(t,e,s){},fc95:function(t,e,s){}}]);
//# sourceMappingURL=chunk-ea482498.1725872215737.js.map