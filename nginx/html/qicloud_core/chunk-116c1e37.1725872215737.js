(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-116c1e37"],{"0ddc":function(e,t,i){var s={"./1.png":"415f","./2.png":"8467","./3.png":"788c","./4.png":"54fc"};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="0ddc"},"11a1":function(e,t,i){},"160b":function(e,t,i){"use strict";const s=[{value:1,label:"入库"},{value:2,label:"在役"},{value:3,label:"故障"},{value:4,label:"报废"}];t["a"]=s},"30da":function(e,t,i){"use strict";i("11a1")},"3f75":function(e,t,i){"use strict";i("fe55")},"415f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAydJREFUSEutll1IVFEQx3+zholpZWVRpBCFRoUWbvRl5EMUFX1AWFQ+RPVaBGlQL/nUx65Fj0IJIVqkBFFBRAWRfYtQvWS2mmlBYSLqBqntnbh73Vz1Xu+uduC+nJn//z8z98w5I7gtVeEi64FtCOtQFqGkhWFCF0IAgxcI9zhBHSI6FqU4GkvVQyoHUU4Bi9ziGrQHEM7RyzVKxbDD2Av6dQHCTWBljEIj3epR9lIin0caRgv6tQCoRZg1TjELpvxE2E2xPI3mGS7o000IdxESJyQWASv9CDsolgeRrSHBy5rNAPUIqf9FbIgkyCS8HJeP1jkDCms0obaNlxP4Z24x1hdmsqZ2j4SsDC/qIZQKN5Rp96bCHwPe/orFO8pHOUKJVAhWnzXFcvT3Z8D5zfCsFYoege25d44jwAmyBJ9uwMMTt3j3Z0J1oeVV/RaKHrshbOwGBUKZXgBOjgWPFmv4Cl6zQ8e3fIJf6xDynfDRYq/bYXXN+JQGe7POzPA7MMeO5kAmVA2W8U07bL0FnSFI80B6IjT9hqkeSJsEwZBly0qy9h3WDzPDPrtGXz0NXh6xYIaCKTgjGb73gkcgYzp86QIRmJkMvX1gGND9G44+hECfjaTS7yh4fSPsyx0OMoVVIcEztG/umQGEDGt/IAQ55dBol2VY0KGkS5OhZjcsmW2R33gHHzqsL30KJCZY/Rjsg5TJMC0JWrsg2A93foxdUsdDsywZKnfCinnQ2AGXnsOV5okeGr/6EEqcaPJSoXwreOdDWzecewLXW6Anzq4f5PfF1Phmeat2wvJ58K0HzjyGipZxZBpu/BivtpwpVnlz58KnTsi6FrdggCDZ1uXt18MIV90ozIv72EqofA+Pfrp5j7D/u7wjz9MXXiF43WgSBfrHHJNsGRoKM1k19DyZPmW6GKgHUtxE47QHw+9ssTSauOEjRpluQbn9n0eMXRTL/UiQo4coUxTMK3qimZqZ7YkWG51hJAyrvFVAXpzli7g3AEWRMkZzuA/CBqcRFsYkrDTj4Wz8g3A0uzmBp5CPsh1hLbBw2KgPzWh41L9LkGdOE3eE8i/alBPoBY2WZwAAAABJRU5ErkJggg=="},"54fc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAxxJREFUSEutlltsDGEUx3/fbuMFQSLpS1+EqDcPrO2FuDygqTYVqRIk1TauSStCq6jdCqqNW4NWpWWxbYImiEsjLhWLFRvvSEUiJIjESwXV3U9mxu7MtjM70zJv35xz/v9zznfO+Y7A5pMg8DAPN/kIcoFpSCapZoJvQB8xnhHjFhFCAmQqSGEllH5c9FCKi1qVxNmnkDeQR0D4iZmZmBLKOUzBzWXA44xnmFaEKCXiBe+GSoYRyiwWAFcRTB4lmWYm+UqUFSLCYyNOEqH0shjBTQRj/oksbiwZQFAowtyN/0oQylwyiRJBMP6/kOkg/biYLZ7yWqszJfpi3Hwg/A93ZudjhAyyxVWiGqGXMlx0mFoVl8GEdGhvSA26aiN8eQ8Pe8z1XFSIp3QItc+yeWNa+iUboKpNA+jcD6d95mA7T8DyKk22Zyn0Jq7MqN9HmOlCzmM+gzwyRTrYBQtX66Luo3BsR7Jq7Wko2KL/O7MNLjabO5bGAiGzaERQbZmv1gcwc5EuvnESGiu1s68dlpTrsltn4NBm69RLmhTCEIK5KS9oKGlLJbjTYOMx3exBEOrW2RVPSMhsPgHpdpo03wFPnrna3XNQb4jUGuyzEuEvx41uLI44aKAOzh6w9VdVkAyMjLCsGioak8Ev+aB1/wgInaa0tgUKLAri/gXYV+qEVE2pfdH4z8NiA2CwHsZO1HtPoQp1Q02xHWlISC9NuNhpqbm7FZZt0sW9XbBnjXZu7gHPUueVqrZFqsavOgwlNTrgw07YuzbZt6GkQT+01Kdo/FSjbdcpKNyqGd8LgG+9OdCRa5BTpMnatsOF42Z6fSwhUxveuZQTo90UbVMd/PwOAUOTmymW74LfP6zHWnx4q4TK8/SR50hm2936KOUvycCbeJ5U0mxmABFg3ChBrcz6lXdWhHmlKCSvGFkos+u648lj55myYkCReE7ikTRbovIQXPkPkfYjWWkkGxZh3OG/6Q0Cs+yCsJC/BNbG02jUcbII7wamOiR+S4xDI16EjeDqBn6buaRRAOSo5Mmr/lvgGYPcJJ8nVht3HPMPzdHvqANCsa8AAAAASUVORK5CYII="},"61f7":function(e,t,i){"use strict";i.d(t,"l",(function(){return s})),i.d(t,"g",(function(){return a})),i.d(t,"h",(function(){return n})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return l})),i.d(t,"i",(function(){return r})),i.d(t,"a",(function(){return c})),i.d(t,"j",(function(){return h})),i.d(t,"k",(function(){return d})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return v})),i.d(t,"f",(function(){return f}));i("d9e2");const s=(e,t,i)=>{const s=/^[a-zA-Z0-9-_]{3,15}$/;t?s.test(t)?i():i(new Error("请输入不包含特殊字符的3-15位的合法用户名")):i(new Error("请输入用户名"))},a=(e,t,i)=>{const s=/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/;if(s.test(t))return i();i(new Error("请输入合法的手机号"))};function n(e,t,i){const s=/^[\w.]{6,16}$/;return t?s.test(t)&&-1===t.indexOf("@")?i():i("6~16位，包含大小写字母和数字的组合"):i("请输入密码")}function o(e,t,i){const s=/^[a-zA-Z0-9_-]{10,40}$/;return t?s.test(t)?i():i(new Error("请输入合法机库编号,长度在10-40位字符")):i()}function l(e,t,i){const s=/^[a-zA-Z0-9_-]{10,40}$/;return t?s.test(t)?i():i(new Error("请输入无人机编号，长度在10-40位字符")):i()}function r(e,t,i){const s=/^[A-Z0-9]{13,30}$/;return s.test(t)?i():i(new Error("请输入合法SN编号"))}function c(e,t,i){return isNaN(t)?(i(new Error("非法的数值！")),!1):(i(),!0)}function h(e,t,i){const s=/^ST_[0-9]{8}$/;return t?s.test(t)?i():i(new Error("编号示例：ST_00000001")):i(new Error("请输入站点编号"))}function d(e,t,i){const s=/^[a-zA-Z,0-9,\u4E00-\uFA29,_,#]{4,16}$/;return s.test(t)?i():i(new Error("请输入合法站点名称（4-15个字符）"))}function u(e,t,i){return t>=5?i():i(new Error("返航悬停高度至少5米"))}function v(e,t,i){return t=t.toString(),t=t.replace(" ",""),""===t.trim()||isNaN(Number(t,10))?i(new Error("无效的数字")):i()}function f(e,t,i){const[s,a]=t.split(","),n=/^[\-\+]?(0(\.\d{1,10})?|([1-9](\d)?)(\.\d{1,10})?|1[0-7]\d{1}(\.\d{1,10})?|180\.0{1,10})$/,o=/^[\-\+]?((0|([1-8]\d?))(\.\d{1,10})?|90(\.0{1,10})?)$/;return n.test(s)&&o.test(a)?(i(),!0):(i(new Error("坐标例:121.3245671,31.123456")),!1)}},"788c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAslJREFUSEullk1IVFEUx39nLMnIIDAqiCCcGunDFmqWabopKEmkMSMIkowWQbuMEkrbFErLWgQZFRE0o1IZhRuxRioZy7AMy7Eogj4oJHDTkHPjfYyN4zjvvrrLd8///M49755zj+CwlELopAyoRLEFwYtikSkTxlFEgMcI99hNSASVzqXMtqma8ZBPHTFOAl6nwOz9CB7OMcRVaSaWSpMSqO6ykii3gCJNULJZmEz2ShXvkzdmAFWQCjwEUeT8I8ySCd8Bv/h5lOhnGlAF2Y7QBWT+F+yvOApUSQ3d8U9TQBXAh4cwkO0IyzsGc7JhuIn0V8T0NEGMQqnljXVwQAXIwMMTrX/mPQwbLlkxvbsAg0cd4wPCxNgstUxawE4OEqNNR0nxTVi+zzL9EYLerVoyhEPip03MOuvgrfbVX3cGfKctyIcrMFCvB4QIflaLClCOh15dFauOQP5Fy3y0BYZOaEuJUSGqgxYUx7VVK2qgKGiZDzfAyHltKUKrAQyhKNVWLSuDEru0XtTB2DVtKRAygF9QLNFW5XihfNQy76+ET/e1pQhfRbXzy1WhLwS22f05VADfnusDIeoemAXstIE9i2Hc6GDaK+o+pRlAtQ3sFqOP6C8zpW4vjeHebwPvCPzW51mXpp1WoMGVLMcHc5fC54euZFZZuC18d4jp1mbhu21t84GNfZAxDwYK4ad2BBFe4bOadwf1KC5rSROb93g/9GzSkk01bxNoPU9PgUJH9domyGu2zD5eh/ABRwnCMyYpnnqeTGg7eea7BQscPaxpBE8WvD5F6lFpmgejcIqkhhHja/KIsQPhtqvOkz66KIpq2cODuFmqIcqABrROmh42gaI2ETbjhHG9mV7hBooCx/SmMjD+mWJ/PI2JJs6DsKIRRa4WWBhDOOt6EE50bk7g6ylFsQsoQchNGvXH7FG/i5f0zTZxx33+AelS3iEfYea2AAAAAElFTkSuQmCC"},8350:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hive-list-wrap has-padding"},[t("el-card",[t("h2",{attrs:{slot:"header"},slot:"header"},[t("el-title",[e._v(" 机库 ")])],1),t("el-form",{attrs:{inline:!0,size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",[t("el-input",{attrs:{clearable:"",placeholder:"请输入机库编号"},model:{value:e.query.hiveID,callback:function(t){e.$set(e.query,"hiveID",t)},expression:"query.hiveID"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v(" 查询 ")])],1),t("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:"hive/hive/add",expression:"'hive/hive/add'"}],staticClass:"float-right"},[t("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 新建 ")])],1)],1),t("el-table",{attrs:{data:e.hiveList,"header-cell-style":e.headStyle,"row-class-name":e.tableRowClassName,"cell-style":e.rowStyle,height:"100px"}},[t("template",{slot:"empty"},[t("NoResult",{attrs:{"has-margin":!1}})],1),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t("el-table-column",{attrs:{label:"编号",prop:"hiveID"}}),t("el-table-column",{attrs:{label:"名称",prop:"hiveName"}}),t("el-table-column",{attrs:{label:"类型",prop:"hiveType"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1===t.row.hiveType?"固定机库":"移动机库")+" ")]}}])}),t("el-table-column",{attrs:{label:"型号",prop:"hiveModel"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.models[t.row.hiveModel])+" ")]}}])}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("div",{staticClass:"device-status"},[t("img",{staticStyle:{width:"14px",height:"14px","margin-right":"8px"},attrs:{src:e.importDeviceIMG(i.status),alt:""}}),t("strong",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e._f("formatDeviceStatus")(i.status)))])])]}}])}),t("el-table-column",{attrs:{label:"上线状态",prop:"deviceIsOnline",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("div",{staticClass:"device-status",on:{click:function(t){return e.showStatusInfo(i)}}},[t("span",{staticStyle:{"font-size":"14px"}},[t("span",{class:["status-tag",{online:1===i.deviceIsOnline}]}),e._v(" "+e._s(1===i.deviceIsOnline?"在线":"离线")+" "),t("a",[t("i",{staticClass:"el-icon-search",staticStyle:{"margin-left":"5px"}})])])])]}}])}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"hive/hive/update",expression:"'hive/hive/update'"}],attrs:{type:"text"},on:{click:function(t){return e.handleEdit(i.row.hiveID)}}},[e._v(" 修改 "),t("i",{staticClass:"el-icon-edit"})]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"hive/hive/delete",expression:"'hive/hive/delete'"}],staticClass:"sky-danger",attrs:{type:"text"},on:{click:function(t){return e.handleRemove(i.row.hiveID)}}},[e._v(" 删除 "),t("i",{staticClass:"el-icon-delete"})]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(i.row.hiveID,!0)}}},[e._v(" 详情 "),t("i",{staticClass:"el-icon-search"})])]}}])})],2),t("el-row",{staticClass:"sorter-wrap"},[t("el-pagination",{staticClass:"x-pagination float-right",attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":e.tableConfig.size,total:e.tableConfig.total},on:{"current-change":e.handleChangeCPage}})],1)],1),t("el-dialog",{staticClass:"protective-line",attrs:{center:"",visible:e.dialogVisible,"close-on-click-modal":!1},on:{close:function(t){return e.handleClose("HiveInfoForm")}}},[t("el-title",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.isEdit?e.disabled?"详情":"编辑":"新建")+" ")]),t("HiveForm",{key:Math.random(),ref:"HiveInfoForm",attrs:{disabled:e.disabled,"is-edit":e.isEdit,data:e.hiveInformation}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.disabled?e._e():t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-success"},on:{click:function(t){return e.submit("HiveInfoForm")}}},[e._v("确 定")]),t("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-error",type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),t("el-dialog",{staticClass:"protective-line",attrs:{width:"600px",center:"",visible:e.statusDialogVisible,"close-on-click-modal":!1},on:{close:e.handleCloseStatus}},[t("el-title",{attrs:{slot:"title"},slot:"title"},[e._v(" 上线状态 ")]),t("div",{staticClass:"status-info"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"info"},[e._v(" 在线状态: "),t("span",[e._v(e._s(1===e.selectedData.deviceIsOnline?"在线":"离线"))])])]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"info"},[e._v(" 总在线时长: "),t("span",[e._v(e._s(e.tiemTrans))])])])],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"info"},[e._v(" 上次上线时间: "),t("span",[e._v(e._s(e.selectedData.lastOnlineTime||"未知"))])])]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"info"},[e._v(" 上次离线时间: "),t("span",[e._v(e._s(e.selectedData.lastOfflineTime||"未知"))])])])],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"info"},[e._v(" 首次上线时间 : "),t("span",[e._v(e._s(e.selectedData.firstOnlineTime||"未知"))])])])],1)],1)],1)],1)},a=[],n=i("da01"),o=i("514b"),l=i("1165"),r={name:"HiveList",components:{HiveForm:n["a"]},filters:{formatDeviceStatus:l["d"]},data(){return{disabled:!1,dialogVisible:!1,statusDialogVisible:!1,isEdit:!1,hiveList:[],models:{},hiveInformation:{},selectedData:{totalOnlinTime:1,lastOfflineTime:"",lastOnlineTime:"",firstOnlineTime:"",deviceIsOnline:0},query:{hiveID:""},tableConfig:{page:1,size:13,total:0}}},computed:{tiemTrans(){var e;const t=(null===(e=this.selectedData)||void 0===e?void 0:e.totalOnlinTime)||0,i=60,s=60*i,a=24*s;return t<i?t+"秒":t<s?(t/i).toFixed(1)+"分钟":t<a?(t/s).toFixed(1)+"小时":(t/a).toFixed(1)+"天"}},created(){const{page:e,size:t}=this.tableConfig;this.fetch(),this.getHiveList(e,t)},methods:{importDeviceIMG(e){return e&&i("0ddc")(`./${e}.png`)},headStyle(){return"text-align:center;background:#F4F7FD"},rowStyle(){return"text-align:center"},tableRowClassName({rowIndex:e}){return e%2===0?"even-number":"uneven-number"},handleQuery(){const{hiveID:e}=this.query;this.tableConfig.page=1,this.tableConfig.size=13,this.getHiveList(1,13,e)},handleChangeCPage(e){this.tableConfig.page=e;const{page:t,size:i}=this.tableConfig;this.getHiveList(t,i)},async handleEdit(e,t){this.disabled=t,this.isEdit=!0,this.$store.dispatch("hive/getHiveDetails",{hiveID:e}).then(({code:e,data:t,reason:i})=>Object(o["a"])(e)?(this.hiveInformation=t,this.dialogVisible=!0,t):this.$message.error("请求站点机库信息失败："+i))},handleCloseStatus(){this.statusDialogVisible=!1,this.selectedData={totalOnlinTime:1,lastOfflineTime:"",lastOnlineTime:"",firstOnlineTime:""}},showStatusInfo(e){this.selectedData.totalOnlinTime=e.totalOnlinTime,this.selectedData.lastOfflineTime=e.lastOfflineTime,this.selectedData.lastOnlineTime=e.lastOnlineTime,this.selectedData.firstOnlineTime=e.firstOnlineTime,this.selectedData.deviceIsOnline=e.deviceIsOnline,this.statusDialogVisible=!0},handleRemove(e){this.$confirm("此操作将该机库, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{code:t,reason:i}=await this.$store.dispatch("hive/removeHive",{hiveID:e});return Object(o["a"])(t)?(this.$message.success("删除成功"),this.getHiveList(this.tableConfig.page,this.tableConfig.size),i):this.$message.error("删除失败："+i)}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},submit(e){this.$refs[e].submit().then(async e=>{let t;t=this.isEdit?await this.$store.dispatch("hive/updateHiveDetails",e):await this.$store.dispatch("hive/addHiveInfo",e);const{code:i,reason:s}=t;return Object(o["a"])(i)?(this.getHiveList(this.tableConfig.page,this.tableConfig.size),this.dialogVisible=!1,this.$message.success((this.isEdit?"修改":"新建")+"机库成功")):this.$message.error(`${this.isEdit?"修改":"新建"}机库失败：${s}`)})},resetForm(e){this.hiveInformation={},this.$refs[e].resetForm(),this.dialogVisible=!1,this.isEdit=!1},handleClose(e){this.disabled=!1,this.resetForm(e)},async getHiveList(e,t,i=""){const{code:s,data:a,reason:n}=await this.$store.dispatch("hive/getHiveList",{page:e,size:t,hiveID:i});if(!Object(o["a"])(s))return this.$message.error(""+n);const{list:l,total:r}=a;return this.hiveList=l,this.tableConfig.total=void 0===r?this.tableConfig.total:r||0,l},handleInitHiveState(e){this.$store.dispatch("hive/initHiveStatus",e.hiveID).then((t,i)=>o["a"]?(e.isFault=!1,e):this.$message.error("机库状态初始化失败："+i)).catch(this.$message.error)},async fetch(){try{const e=await this.$store.dispatch("device/fetch",{modelType:2});e.data.forEach(e=>{this.models[e.modelCode]=e.modelName})}catch(e){console.error(e),this.$message.error("请求机库模型失败，请联系管理员")}}}},c=r,h=(i("3f75"),i("2877")),d=Object(h["a"])(c,s,a,!1,null,"10c7ed5e",null);t["default"]=d.exports},8467:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAA4NJREFUSEutlmlIFGEYx//P7FZmF1aUblqJdohldohlq9unThTbzUqKkA6CCjvAqKSS6EDrQ0FEdEhFH8qtpUOoIDrczSKxIKVUFDvQNdMurFSceWLGdnVd15na5tu8z//5/9553mMegtrDIHNRSCIEWgLQXACRAAV1pvEXANVEXMwiF9qSnHYQuC9L8hXMYQhlDkMGM+0GyRANDyvwI1ON9RdyCFJvGb0C0x6PDhdJfxWEOA0YbwmjRMcdK6ymj7U9g17AVHvoPAFsBTDyn2BdSU2QJIvN5Czq7uMBTH0SNl+Q+DbA/f2E/UmndpEp5WbSh3suPzcwzWGYJLJQAvCQ/wNzu7ToiGdZjfWV8ogCTCtI04nBxU//ec3UZiivaUPCHOtyq6gALXbDWgadV8vzK0683masPy+fGjLbx1Rp3voaqRnhh3ChNrtLzai2JdZNpKVFoSYifqTRR1VG0OPItFuYMCQGFkeoh56Z5pHZbsgFaKeqkwZBoH44DkwtQPigyXjYeBMnqzb3yOI8uZx2AEYNfn1KDAOjkB2dj+CAMDxvfoDcN2u89ASyy8AGAKP9AUYNNWHflHz0Fwag/FsJ9pct9WX3kcz20DZ/DnrciBTsijqlAOp+1WJrqQnc+zUqn8L2PoGrxu9DWGAkjlduQav43WvWC0M2YkPEXmX8c3sjtr9YgJaOT30USwH6Lml+fBmG9QtCU5sTJ6qy8Ppb12ZOH7cXy8I2Kuat4k9kvpiP5ra3aisjl9T3phk/aDpyY23QUz/F6GLtUTxsvIL0cVlYELzSbb7jZTLe/XipBoOyaSwOQx4zZflSRwyOR17sdXe4TWrFACHA/Z5TnoGyr/dVYZ0CztN08GcELUZ29Bkv02MV2/C06ZpGGKAcfK1XW9KoVdg6MddtfrbmIO46T2uGgVEdk1g3Sbm8zQ7DOjCdU8tebNiE9LGZKKy/hKvvD6vJPePuy9v1ewp58gygWX/nolUtlOqcs+Pdvyc5zVI8YjKLASUABmu10ahrIV1r3PWE5gpZ79FiLHMEL5JYf8Ofm6dHHdsF6ki9Zmy44xr3aqI6obqC//ClLQKJy7vDvL7QNYvO8gZeBqSZGsvWQyaUku7nalcZuwdVG2EJwh4CR2gBM6hGgHT4rxvh7uZyB/6qKMRIpE9mEhMAivBs9bmGWFfM3HE7Jsnp8NVxuzx/A04MSWVtJm/SAAAAAElFTkSuQmCC"},da01:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hive-infor-form-wrap"},[t("el-form",{ref:"hiveInformationForm",attrs:{size:"small","label-position":"right","label-width":"80px",model:e.hiveInfo,rules:e.rules,disabled:e.disabled}},[t("el-row",{attrs:{gutter:e.gutter}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机库编号",prop:"hiveID"}},[Boolean(e.equipments.length)?t("InputAppend",[!e.isAdd&&Boolean(e.equipments.length)?t("el-select",{on:{change:function(t){return e.handleChange(e.hiveInfo.hiveID)}},model:{value:e.hiveInfo.hiveID,callback:function(t){e.$set(e.hiveInfo,"hiveID",t)},expression:"hiveInfo.hiveID"}},e._l(e.equipments,(function(e){return t("el-option",{key:e.hiveID,attrs:{label:e.hiveID,value:e.hiveID}})})),1):t("el-input",{attrs:{disabled:e.isEdit},model:{value:e.hiveInfo.hiveID,callback:function(t){e.$set(e.hiveInfo,"hiveID","string"===typeof t?t.trim():t)},expression:"hiveInfo.hiveID"}}),t("i",{staticClass:"el-icon-refresh",attrs:{slot:"input-append"},on:{click:e.handleChangeMode},slot:"input-append"})],1):t("el-input",{attrs:{disabled:e.isEdit},model:{value:e.hiveInfo.hiveID,callback:function(t){e.$set(e.hiveInfo,"hiveID","string"===typeof t?t.trim():t)},expression:"hiveInfo.hiveID"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机库名称",prop:"hiveName"}},[t("el-input",{model:{value:e.hiveInfo.hiveName,callback:function(t){e.$set(e.hiveInfo,"hiveName","string"===typeof t?t.trim():t)},expression:"hiveInfo.hiveName"}})],1)],1)],1),t("el-row",{attrs:{gutter:e.gutter}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机库类型",prop:"hiveType"}},[t("el-radio",{attrs:{label:1},model:{value:e.hiveInfo.hiveType,callback:function(t){e.$set(e.hiveInfo,"hiveType",t)},expression:"hiveInfo.hiveType"}},[e._v(" 固定 ")]),t("el-radio",{attrs:{label:2},model:{value:e.hiveInfo.hiveType,callback:function(t){e.$set(e.hiveInfo,"hiveType",t)},expression:"hiveInfo.hiveType"}},[e._v(" 移动 ")])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"机库型号",prop:"hiveModel"}},[t("el-select",{model:{value:e.hiveInfo.hiveModel,callback:function(t){e.$set(e.hiveInfo,"hiveModel",t)},expression:"hiveInfo.hiveModel"}},e._l(e.models,(function(e,i){return t("el-option",{key:i,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-form-item",{attrs:{label:"FLV流地址"}},[t("el-input",{model:{value:e.hiveInfo.hiveFLVURL,callback:function(t){e.$set(e.hiveInfo,"hiveFLVURL",t)},expression:"hiveInfo.hiveFLVURL"}})],1),t("el-form-item",{attrs:{label:"机库描述"}},[t("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":""},model:{value:e.hiveInfo.context,callback:function(t){e.$set(e.hiveInfo,"context",t)},expression:"hiveInfo.context"}})],1)],1)],1)},a=[],n=(i("d9e2"),i("14d9"),i("b7c3")),o=i("160b"),l=i("61f7"),r=i("514b"),c={name:"HiveInfoForm",props:{gutter:{type:Number,default:10},disabled:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},data:{type:Object,default(){return{}}},equipments:{type:Array,default(){return[]}},id:{type:String,default(){return""}}},data(){return{isAdd:!1,deviceStatus:o["a"],siteList:[],hiveModeList:[],hiveInfo:{hiveID:"",hiveName:"",hiveType:1,hiveModel:"",siteID:"",context:"",hiveFLVURL:""},rules:{hiveID:[{validator:l["b"],trigger:"blur"}],hiveName:[{required:!0,message:"请输入机库名称",trigger:"blur"}],hiveType:[{required:!0,message:"请选择机库类型",trigger:"change"}],hiveModel:[{required:!0,message:"请选择机库型号",trigger:"change"}],siteID:[{required:!0,message:"请选择站点",trigger:"blur"}]},models:[]}},created(){if(this.id&&this.getHiveDetails(this.id),this.data){const e=this.$deepClone(this.data);Object.keys(e).forEach(t=>{void 0===this.hiveInfo[t]&&delete e[t]}),this.hiveInfo=e}this.getHiveOptions(),this.has&&this.getSiteGroup(),this.fetch()},methods:{handleChangeMode(){this.isAdd=!this.isAdd,this.hiveInfo={},this.$emit("handleChangeMode",this.isAdd)},submit(e="hiveInformationForm"){return new Promise((t,i)=>{this.$refs[e].validate(e=>{e?t(this.hiveInfo):i(new Error("信息不全"))})})},resetForm(e="hiveInformationForm"){this.$refs[e].resetFields()},handleChange(e){this.getHiveDetails(e)},getHiveOptions(){const e=n["g"].HIVEMODEL.getAllKeys();e.forEach(e=>{this.hiveModeList.push({value:e,label:n["g"].HIVEMODEL.getDescFromValue(e)})})},async getSiteGroup(){const{code:e,data:t,reason:i}=await this.$store.dispatch("site/getSiteGroup");if(!Object(r["a"])(e))return this.$message.error("请求失败："+i);const{list:s}=t;return this.siteList=s,s},async getHiveDetails(e){const{code:t,data:i}=await this.$store.dispatch("hive/getHiveDetails",{hiveID:e});return Object(r["a"])(t)?(this.hiveInfo=i,i):this.$message.error("获取机库信息失败")},async fetch(){try{const e=await this.$store.dispatch("device/fetch",{modelType:2});this.models=e.data.map(e=>({value:e.modelCode,label:e.modelName}))}catch(e){console.error(e),this.$message.error("请求机库模型失败，请联系管理员")}}}},h=c,d=(i("30da"),i("2877")),u=Object(d["a"])(h,s,a,!1,null,"35d4985e",null);t["a"]=u.exports},fe55:function(e,t,i){}}]);
//# sourceMappingURL=chunk-116c1e37.1725872215737.js.map